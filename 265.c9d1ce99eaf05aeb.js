"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[265],{7265:(ho,q,p)=>{p.r(q),p.d(q,{TorneosModule:()=>po});var k=p(4521),e=p(5e3);let M=(()=>{class r{constructor(){}ngOnInit(){}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-torneos"]],decls:1,vars:0,template:function(t,o){1&t&&e._UZ(0,"router-outlet")},directives:[k.lC],styles:[""]}),r})();var l=p(4999),v=p(7579),n=p(2722),c=p(3075),g=p(8966),Y=p(5226),h=p.n(Y),f=p(520),z=p(2340),T=p(1135),C=p(8505);let _=(()=>{class r{constructor(t){this._httpClient=t,this.url=`${z.N.apiUrlAdmin}`,this._torneos=new T.X(null),this._torneo=new T.X(null),this._grupos=new T.X(null),this._inscritosTorneo=new T.X(null),this._jugadores=new T.X(null),this._tipos=new T.X(null),this._modalidades=new T.X(null),this._ramas=new T.X(null),this._categorias=new T.X(null),this._fases=new T.X(null),this._estados=new T.X(null)}get jugadores$(){return this._jugadores.asObservable()}get torneos$(){return this._torneos.asObservable()}get torneo$(){return this._torneo.asObservable()}get ramas$(){return this._ramas.asObservable()}get tipos$(){return this._tipos.asObservable()}get modalidades$(){return this._modalidades.asObservable()}get categorias$(){return this._categorias.asObservable()}get fases$(){return this._fases.asObservable()}get estados$(){return this._estados.asObservable()}get grupos$(){return this._grupos.asObservable()}get inscritosTorneo$(){return this._inscritosTorneo.asObservable()}set torneos(t){this._torneos.next(t)}set torneo(t){this._torneo.next(t)}set grupos(t){this._grupos.next(t)}set inscritos(t){this._inscritosTorneo.next(t)}obtenerTorneos(){return this._httpClient.get(`${this.url}torneos`).pipe((0,C.b)(t=>{this._torneos.next(t)}))}obtenerTorneosRefresh(){return this._httpClient.get(`${this.url}torneos`)}obtenerTorneoById(t){let o=new f.LE;return o=o.set("id",t),this._httpClient.get(`${this.url}torneos/byId`,{params:o}).pipe((0,C.b)(i=>{this._torneo.next(i)}))}obtenerTorneoByIdRefresh(t){let o=new f.LE;return o=o.set("id",t),this._httpClient.get(`${this.url}torneos/byId`,{params:o})}crearTorneo(t){return this._httpClient.post(`${this.url}torneos`,t)}editarTorneo(t,o){return this._httpClient.patch(`${this.url}torneos/editarTorneo?id=${t}`,o)}finalizarInscripciones(t){let o=new f.LE;return o=o.set("torneoId",t),this._httpClient.patch(`${this.url}Torneos/FinalizarInscripciones`,{},{params:o})}sortearGrupos(t){let o=new f.LE;return o=o.set("torneoId",t),this._httpClient.get(`${this.url}Torneos/FormarGrupos`,{params:o})}reSortearGrupos(t){let o=new f.LE;return o=o.set("torneoId",t),this._httpClient.get(`${this.url}Torneos/FormarGrupos`,{params:o})}programarPartidosFase(t){let o=new f.LE;return o=o.set("torneoId",t),this._httpClient.get(`${this.url}Torneos/programarPartidosFaseGrupos`,{params:o})}cambiarTorneoAProgramacion(t){let o=new f.LE;return o=o.set("torneoId",t),this._httpClient.patch(`${this.url}Torneos/CambiarTorneoAProgramacion`,{},{params:o})}obtenerGruposTorneo(t){let o=new f.LE;return o=o.set("torneoId",t),this._httpClient.get(`${this.url}grupos/obtenerGruposPorTorneoId`,{params:o}).pipe((0,C.b)(i=>{this._grupos.next(i)}))}obtenerGruposRefresh(t){let o=new f.LE;return o=o.set("torneoId",t),this._httpClient.get(`${this.url}grupos/obtenerGruposPorTorneoId`,{params:o})}crearGrupo(t,o){let i=new f.LE;return i=i.set("torneoId",o),this._httpClient.post(`${this.url}grupos/crearGrupo`,t,{params:i})}obtenerJugadoresInscritosTorneo(t){let o=new f.LE;return o=o.set("torneoId",t),this._httpClient.get(`${this.url}inscripciones/obtenerInscripcionesPorTorneoId`,{params:o}).pipe((0,C.b)(i=>{this._inscritosTorneo.next(i)}))}obtenerInscritosTorneo(t){let o=new f.LE;return o=o.set("torneoId",t),this._httpClient.get(`${this.url}inscripciones/obtenerInscripcionesPorTorneoId`,{params:o})}eliminarGrupo(t,o){let i=new f.LE;return i=i.set("torneoId",t),i=i.set("grupoId",o),this._httpClient.delete(`${this.url}grupos/eliminarGrupo`,{params:i})}agregarParticipanteGrupo(t,o,i){let a=new f.LE;return a=a.set("torneoId",t),a=a.set("grupoId",o),this._httpClient.patch(`${this.url}grupos/agregarParticipante`,i,{params:a})}removerParticipanteGrupo(t,o,i){let a=new f.LE;return a=a.set("torneoId",t),a=a.set("grupoId",o),a=a.set("inscripcionId",i),this._httpClient.delete(`${this.url}grupos/eliminarParticipanteGrupo`,{params:a})}obtenerRamas(){return this._httpClient.get(`${this.url}Torneos/ObtenerRamas`).pipe((0,C.b)(t=>{this._ramas.next(t)}))}obtenerTipos(){return this._httpClient.get(`${this.url}Torneos/ObtenerTipos`).pipe((0,C.b)(t=>{this._tipos.next(t)}))}obtenerModalidades(){return this._httpClient.get(`${this.url}Torneos/ObtenerModalidades`).pipe((0,C.b)(t=>{this._modalidades.next(t)}))}obtenerCategorias(){return this._httpClient.get(`${this.url}Torneos/ObtenerCategorias`).pipe((0,C.b)(t=>{this._categorias.next(t)}))}obtenerFases(){return this._httpClient.get(`${this.url}Torneos/ObtenerFases`).pipe((0,C.b)(t=>{this._fases.next(t)}))}obtenerEstados(){return this._httpClient.get(`${this.url}Torneos/ObtenerEstados`).pipe((0,C.b)(t=>{this._estados.next(t)}))}crearPareja(t){return this._httpClient.post(`${this.url}parejas`,t)}obtenerPartidosTorneo(t){let o=new f.LE;return o=o.set("torneoId",t),this._httpClient.get(`${this.url}partidos/ObtenerPartidosTorneo`,{params:o})}actualizarPartido(t,o){return this._httpClient.patch(`${this.url}partidos/actualizarResultadoPartido/${t}`,o)}sortearSiguienteFase(t){let o=new f.LE;return o=o.set("torneoId",t),this._httpClient.get(`${this.url}partidos/SortearSiguienteLlaveFaseGrupos`,{params:o})}obtenerJugadores(t){let o=new f.LE;return o=o.set("rama",t.rama),o=o.set("categoria",t.categoria),this._httpClient.get(`${this.url}jugadores/filters`,{params:o})}obtenerParejas(t){let o=new f.LE;return o=o.set("rama",t.rama),o=o.set("categoria",t.categoria),this._httpClient.get(`${this.url}parejas/filters`,{params:o})}inscribirJugador(t){return this._httpClient.post(`${this.url}inscripciones/inscribirJugador`,t)}inscribirPareja(t){return this._httpClient.post(`${this.url}inscripciones/inscribirPareja`,t)}obtenerJornadasPorTorneo(t){let o=new f.LE;return o=o.set("torneoId",t),this._httpClient.get(`${this.url}jornadas/ObtenerJornadasTorneo`,{params:o})}programarPartidosjornada(t,o){let i=new f.LE;return i=i.set("torneoId",t),i=i.set("jornadaId",o),this._httpClient.get(`${this.url}Torneos/programarPartidosFaseGruposTorneoEscalera`,{params:i})}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(f.eN))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var w=p(7423),J=p(5245),x=p(7322),A=p(7531),O=p(9814),d=p(9808),I=p(7238);function B(r,s){if(1&r&&(e.TgZ(0,"mat-radio-button",25),e._uU(1),e.ALo(2,"titlecase"),e.qZA()),2&r){const t=s.$implicit;e.Q6J("value",t.nombre),e.xp6(1),e.hij("",e.lcZ(2,2,t.descripcion),"\xa0\xa0")}}function L(r,s){if(1&r&&(e.TgZ(0,"mat-radio-button",25),e._uU(1),e.ALo(2,"titlecase"),e.qZA()),2&r){const t=s.$implicit;e.Q6J("value",t.nombre),e.xp6(1),e.hij("",e.lcZ(2,2,t.descripcion),"\xa0\xa0")}}function $(r,s){if(1&r&&(e.TgZ(0,"mat-radio-button",25),e._uU(1),e.ALo(2,"titlecase"),e.qZA()),2&r){const t=s.$implicit;e.Q6J("value",t.nombre),e.xp6(1),e.hij("",e.lcZ(2,2,t.descripcion),"\xa0\xa0")}}function H(r,s){1&r&&(e.TgZ(0,"div")(1,"mat-label",10),e._uU(2,"Grupos"),e.qZA(),e.TgZ(3,"div",26),e._UZ(4,"input",27),e.qZA()()),2&r&&(e.xp6(4),e.Q6J("formControlName","cantidad_grupos"))}function V(r,s){1&r&&(e.TgZ(0,"div")(1,"mat-label",10),e._uU(2,"Jornadas"),e.qZA(),e.TgZ(3,"div",26),e._UZ(4,"input",28),e.qZA()()),2&r&&(e.xp6(4),e.Q6J("formControlName","cantidad_jornadas_regulares"))}function X(r,s){1&r&&(e.TgZ(0,"div")(1,"mat-label",10),e._uU(2,"Jornadas cruzadas"),e.qZA(),e.TgZ(3,"div",26),e._UZ(4,"input",29),e.qZA()()),2&r&&(e.xp6(4),e.Q6J("formControlName","cantidad_jornadas_cruzadas"))}function W(r,s){if(1&r&&(e.TgZ(0,"mat-radio-button",25),e._uU(1),e.ALo(2,"titlecase"),e.qZA()),2&r){const t=s.$implicit;e.Q6J("value",t.nombre),e.xp6(1),e.hij("",e.lcZ(2,2,t.descripcion),"\xa0\xa0")}}function K(r,s){if(1&r){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",12)(2,"mat-label",10),e._uU(3),e.ALo(4,"titlecase"),e.qZA(),e._UZ(5,"br"),e.TgZ(6,"mat-radio-group",30),e.NdJ("ngModelChange",function(i){const u=e.CHM(t).$implicit;return e.oxw().valuesSet[u.nombre]=i}),e.TgZ(7,"mat-radio-button",25),e._uU(8,"1 set"),e.qZA(),e._uU(9,"\xa0\xa0 "),e.TgZ(10,"mat-radio-button",25),e._uU(11,"2 de 3"),e.qZA(),e._uU(12,"\xa0\xa0 "),e.TgZ(13,"mat-radio-button",25),e._uU(14,"3 de 5"),e.qZA(),e._uU(15,"\xa0\xa0 "),e.qZA()(),e.BQk()}if(2&r){const t=s.$implicit,o=e.oxw();e.xp6(3),e.Oqu(e.lcZ(4,6,t.descripcion)),e.xp6(3),e.Q6J("name",t.descripcion)("ngModel",o.valuesSet[t.nombre]),e.xp6(1),e.Q6J("value",1),e.xp6(3),e.Q6J("value",2),e.xp6(3),e.Q6J("value",3)}}let y=(()=>{class r{constructor(t,o,i,a,u){this.matDialogRef=t,this._formBuilder=o,this._changeDetectorRef=i,this.data=a,this._torneoService=u,this.tipoAccion="Crear",this.sets=[{id:1,sets:{sets_ganar:1,sets_totales:1}},{id:2,sets:{sets_ganar:2,sets_totales:3}},{id:3,sets:{sets_ganar:3,sets_totales:5}}],this.valuesSet={},this.ramas=[],this.tipos=[],this.modalidades=[],this.categorias=[],this.fases=[],this.mostrarJornadas=!1,this._unsubscribeAll=new v.x,this.torneo={},this.torneoForm=this._formBuilder.group({nombre:new c.NI({value:"",disabled:!1},c.kI.required),tipo_torneo:new c.NI({value:"",disabled:!1},c.kI.required),rama:new c.NI({value:"",disabled:!1},c.kI.required),modalidad:new c.NI({value:"",disabled:!1},c.kI.required),cantidad_grupos:new c.NI({value:2,disabled:!1},[c.kI.required]),categoria:new c.NI({value:"",disabled:!1},c.kI.required),cantidad_jornadas_regulares:new c.NI({value:1,disabled:!0},c.kI.required),cantidad_jornadas_cruzadas:new c.NI({value:1,disabled:!0},c.kI.required)}),this.tipoAccion=a.accion,"Editar"===a.accion&&(this.torneoForm.get("modalidad").disable(),this.torneo=a.torneo),this.Toast=h().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:m=>{m.addEventListener("mouseenter",h().stopTimer),m.addEventListener("mouseleave",h().resumeTimer)}})}ngOnInit(){this._torneoService.ramas$.pipe((0,n.R)(this._unsubscribeAll)).subscribe(t=>{this.ramas=t,this._changeDetectorRef.markForCheck()}),this._torneoService.tipos$.pipe((0,n.R)(this._unsubscribeAll)).subscribe(t=>{this.tipos=t,this._changeDetectorRef.markForCheck()}),this._torneoService.modalidades$.pipe((0,n.R)(this._unsubscribeAll)).subscribe(t=>{this.modalidades=t,this._changeDetectorRef.markForCheck()}),this._torneoService.categorias$.pipe((0,n.R)(this._unsubscribeAll)).subscribe(t=>{this.categorias=t,this._changeDetectorRef.markForCheck()}),this._torneoService.fases$.pipe((0,n.R)(this._unsubscribeAll)).subscribe(t=>{this.fases=t,t.forEach(o=>{this.valuesSet[o.nombre]=1}),"Editar"===this.tipoAccion&&(this.torneoForm.patchValue(this.torneo),this.ordenarFasesEditar(this.torneo.configuracion_sets),this.tipoTorneoChange({value:this.torneo.tipo_torneo})),this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}onGrupoChange(){}crearTorneo(){this.torneoForm.invalid&&(this.Toast.fire({icon:"error",title:"Complete todos los campos del torneo para continuar."}),this.torneoForm.markAllAsTouched());let t=this.torneoForm.getRawValue();if(t.cantidad_jornadas_cruzadas>t.cantidad_jornadas_regulares)return void this.Toast.fire({icon:"error",title:"La cantidad de jornadas cruzadas no debe ser mayor a las jornadas regulares."});let o={};for(const[a,u]of Object.entries(this.valuesSet))o[a]=this.getFasePorId(u);let i=Object.assign(Object.assign({},this.torneoForm.getRawValue()),{configuracion_sets:o});"regular"===i.tipo_torneo&&delete i.jornadas,i.fase_actual="grupos",this.matDialogRef.close(i)}tipoTorneoChange(t){"escalera"===t.value?(this.mostrarJornadas=!0,this.torneoForm.get("cantidad_jornadas_cruzadas").enable(),this.torneoForm.get("cantidad_jornadas_regulares").enable()):(this.mostrarJornadas=!1,this.torneoForm.get("cantidad_jornadas_cruzadas").disable(),this.torneoForm.get("cantidad_jornadas_regulares").disable()),this._changeDetectorRef.markForCheck()}getFasePorId(t){let o={};return this.sets.forEach(i=>{i.id===t&&(o=i.sets)}),o}ordenarFasesEditar(t){for(const[o,i]of Object.entries(t))this.valuesSet[o]=i.sets_ganar;this._changeDetectorRef.markForCheck()}onNoClick(){this.matDialogRef.close()}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(g.so),e.Y36(c.qu),e.Y36(e.sBO),e.Y36(g.WI),e.Y36(_))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-crear-torneo"]],decls:50,vars:19,consts:[[1,"flex","flex-col","max-w-240","md:min-w-160","max-h-screen","-m-6"],[1,"flex","flex-0","items-center","justify-between","h-12","pr-3","sm:pr-5","pl-6","sm:pl-8","text-on-primary","p-3","border-b-4","mr-4","ml-4","color-borde","mt-4"],[1,"text-2xl","font-medium","text-black","mb-4"],["mat-icon-button","",3,"tabIndex","click"],[1,"text-current",3,"svgIcon"],[1,"mt-10","mb-10"],[1,"w-full","grid","grid-cols-1","md:grid-cols-2"],[1,"p-6","md:p-10"],[1,"flex","flex-col","flex-auto","overflow-y-auto",3,"formGroup"],["appearance","fill",1,"w-full"],[1,"font-medium","pb-4","text-xl"],["matInput","","type","text",3,"formControlName"],[1,"w-full","mb-3"],["aria-label","seleccionar tipo de torneo",3,"formControlName","change"],["class","text-lg",3,"value",4,"ngFor","ngForOf"],["aria-label","seleccionar rama del torneo",3,"formControlName"],["aria-label","seleccionar modalidad del torneo",3,"formControlName"],[1,"w-full","grid","grid-cols-1","md:grid-cols-2","gap-5"],[4,"ngIf"],[1,"md:border-l-4","p-6","md:p-10","color-borde"],[1,"w-full","font-semibold","text-2xl","mb-4"],[4,"ngFor","ngForOf"],[1,"flex","justify-center","mb-4","pb-5","md:pb-0"],["matTooltip","Crear torneo","mat-flat-button","",1,"ml-4","bg-verdemi","text-white","text-xl","font-bold",3,"click"],[3,"svgIcon"],[1,"text-lg",3,"value"],[1,"input-number-set","mb-4"],["type","number","name","grupos","id","grupos","min","1",1,"w-6/12",3,"formControlName"],["type","number","name","jornadas_regulares","id","jornadas_regulares","min","1",1,"w-6/12",3,"formControlName"],["type","number","name","jornadas_cruzadas","id","jornadas_cruzadas","min","1",1,"w-6/12",3,"formControlName"],[3,"name","ngModel","ngModelChange"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3),e.qZA(),e.TgZ(4,"button",3),e.NdJ("click",function(){return o.onNoClick()}),e._UZ(5,"mat-icon",4),e.qZA()(),e.TgZ(6,"div",5)(7,"div",6)(8,"div",7)(9,"form",8)(10,"mat-form-field",9)(11,"mat-label",10),e._uU(12,"Nombre del torneo"),e.qZA(),e._UZ(13,"input",11),e.qZA(),e.TgZ(14,"div",12)(15,"mat-label",10),e._uU(16,"Tipo de torneo"),e.qZA(),e._UZ(17,"br"),e.TgZ(18,"mat-radio-group",13),e.NdJ("change",function(a){return o.tipoTorneoChange(a)}),e.YNc(19,B,3,4,"mat-radio-button",14),e.qZA()(),e.TgZ(20,"div",12)(21,"mat-label",10),e._uU(22,"Rama"),e.qZA(),e._UZ(23,"br"),e.TgZ(24,"mat-radio-group",15),e.YNc(25,L,3,4,"mat-radio-button",14),e.qZA()(),e.TgZ(26,"div",12)(27,"mat-label",10),e._uU(28,"Modalidad"),e.qZA(),e._UZ(29,"br"),e.TgZ(30,"mat-radio-group",16),e.YNc(31,$,3,4,"mat-radio-button",14),e.qZA()(),e.TgZ(32,"div",17),e.YNc(33,H,5,1,"div",18),e.YNc(34,V,5,1,"div",18),e.YNc(35,X,5,1,"div",18),e.qZA(),e.TgZ(36,"div",12)(37,"mat-label",10),e._uU(38,"Categoria"),e.qZA(),e._UZ(39,"br"),e.TgZ(40,"mat-radio-group",16),e.YNc(41,W,3,4,"mat-radio-button",14),e.qZA()()()(),e.TgZ(42,"div",19)(43,"div",20),e._uU(44,"Sets"),e.qZA(),e.YNc(45,K,16,8,"ng-container",21),e.qZA()()(),e.TgZ(46,"div",22)(47,"button",23),e.NdJ("click",function(){return o.crearTorneo()}),e._UZ(48,"mat-icon",24),e._uU(49),e.qZA()()()),2&t&&(e.xp6(3),e.hij("",o.tipoAccion," torneo"),e.xp6(1),e.Q6J("tabIndex",-1),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:x"),e.xp6(4),e.Q6J("formGroup",o.torneoForm),e.xp6(4),e.Q6J("formControlName","nombre"),e.xp6(5),e.Q6J("formControlName","tipo_torneo"),e.xp6(1),e.Q6J("ngForOf",o.tipos),e.xp6(5),e.Q6J("formControlName","rama"),e.xp6(1),e.Q6J("ngForOf",o.ramas),e.xp6(5),e.Q6J("formControlName","modalidad"),e.xp6(1),e.Q6J("ngForOf",o.modalidades),e.xp6(2),e.Q6J("ngIf",!o.mostrarJornadas),e.xp6(1),e.Q6J("ngIf",o.mostrarJornadas),e.xp6(1),e.Q6J("ngIf",o.mostrarJornadas),e.xp6(5),e.Q6J("formControlName","categoria"),e.xp6(1),e.Q6J("ngForOf",o.categorias),e.xp6(4),e.Q6J("ngForOf",o.fases),e.xp6(3),e.Q6J("svgIcon","mat_outline:add"),e.xp6(1),e.hij(" ",o.tipoAccion," torneo "))},directives:[w.lW,J.Hw,c._Y,c.JL,c.sg,x.KE,x.hX,A.Nt,c.Fj,c.JJ,c.u,O.VQ,d.sg,O.U0,d.O5,c.qQ,c.wV,c.On,I.gM],pipes:[d.rS],styles:[".color-borde{border-color:#e33022}.mat-radio-inner-circle{background-color:#ffd484!important}.input-number-set{width:100%;display:flex;justify-content:flex-start}.input-number-set input{background-color:#bebebeb1;border-radius:7px;padding:10px;font-size:18px;font-weight:800;text-align:center}.input-number-set .ng-invalid:not(form).ng-touched.ng-pristine,.input-number-set .ng-invalid:not(form).ng-touched.ng-dirty{border:1px solid #E33022!important}.mat-form-field.mat-form-field-appearance-fill .mat-form-field-wrapper .mat-form-field-flex,.mat-form-field.mat-form-field-appearance-fill.mat-focused .mat-form-field-wrapper .mat-form-field-flex{background-color:#bebebeb1!important}.mat-form-field input{font-size:18px;font-weight:700}\n"],encapsulation:2}),r})();var ee=p(7446);function te(r,s){1&r&&(e.TgZ(0,"h2",4),e._uU(1,"Para el torneo escalera los grupos se formaran automaticamente y no podran editarse."),e.qZA())}function oe(r,s){if(1&r&&(e.TgZ(0,"div",12)(1,"mat-checkbox",13),e._uU(2,"Formar fase de grupos autom\xe1ticamente."),e.qZA()()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("formControl",t.formarGrupos)}}let re=(()=>{class r{constructor(t,o,i){this.matDialogRef=t,this._changeDetectorRef=o,this.data=i,this.inscritos=0,this.torneo={},this.formarGrupos=new c.NI(!1),this.tipoTorneo="",this.inscritos=i.inscritos,this.torneo=i.torneo,this.tipoTorneo=i.tipoTorneo,"escalera"===this.tipoTorneo&&this.formarGrupos.setValue(!0)}ngOnInit(){}confirmar(){this.matDialogRef.close({formar:this.formarGrupos.value})}onNoClick(){this.matDialogRef.close()}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(g.so),e.Y36(e.sBO),e.Y36(g.WI))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-confirmar-iniciar-torneo"]],decls:25,vars:4,consts:[[1,"flex","flex-col","max-w-240","md:min-w-100","max-h-screen","-m-6","p-5"],[1,"p-3","text-center"],[1,"text-xl","font-bold"],[1,"text-naranmi"],[1,"text-lg","font-bold"],["class","text-lg font-bold",4,"ngIf"],["class","p-3",4,"ngIf"],[1,"p-2","grid","grid-cols-2","gap-5"],[1,"flex","justify-end"],["mat-flat-button","",1,"text-white","font-bold","text-lg","bg-chiliRed",3,"click"],[1,"flex","justify-start"],["mat-flat-button","",1,"text-white","font-bold","text-lg","bg-verdemi",3,"click"],[1,"p-3"],[1,"text-lg",3,"formControl"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h1",2),e._uU(3,"\xbf Estas seguro que deseas finalizar las inscripciones del torneo "),e._UZ(4,"br"),e.TgZ(5,"span",3),e._uU(6),e.qZA(),e._uU(7," ?"),e.qZA(),e._UZ(8,"br"),e.TgZ(9,"h2",4),e._uU(10,"Hay "),e.TgZ(11,"span",3),e._uU(12),e.qZA(),e._uU(13," jugadores inscritos."),e.qZA(),e.YNc(14,te,2,0,"h2",5),e.qZA(),e.YNc(15,oe,3,1,"div",6),e.TgZ(16,"div",7)(17,"div",8)(18,"button",9),e.NdJ("click",function(){return o.onNoClick()}),e.TgZ(19,"span"),e._uU(20,"No"),e.qZA()()(),e.TgZ(21,"div",10)(22,"button",11),e.NdJ("click",function(){return o.confirmar()}),e.TgZ(23,"span"),e._uU(24,"Si"),e.qZA()()()()()),2&t&&(e.xp6(6),e.Oqu(o.torneo.nombre),e.xp6(6),e.Oqu(o.inscritos),e.xp6(2),e.Q6J("ngIf","regular"!==o.tipoTorneo),e.xp6(1),e.Q6J("ngIf","regular"===o.tipoTorneo))},directives:[d.O5,ee.oG,c.JJ,c.oH,w.lW],styles:[""]}),r})(),j=(()=>{class r{constructor(t,o,i){this.matDialogRef=t,this._changeDetectorRef=o,this.data=i,this.mensaje="",this.mensaje=i.mensaje}ngOnInit(){}confirmar(){this.matDialogRef.close(!0)}onNoClick(){this.matDialogRef.close()}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(g.so),e.Y36(e.sBO),e.Y36(g.WI))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-confirmar-accion"]],decls:13,vars:1,consts:[[1,"flex","flex-col","max-w-240","md:min-w-100","max-h-screen","-m-6","p-5"],[1,"text-center","p-5"],[1,"text-xl","font-bold"],[1,"p-2","grid","grid-cols-2","gap-5"],[1,"flex","justify-end"],["mat-flat-button","",1,"text-white","font-bold","text-lg","bg-chiliRed",3,"click"],[1,"flex","justify-start"],["mat-flat-button","",1,"text-white","font-bold","text-lg","bg-verdemi",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"span",2),e._uU(3),e.qZA()(),e.TgZ(4,"div",3)(5,"div",4)(6,"button",5),e.NdJ("click",function(){return o.onNoClick()}),e.TgZ(7,"span"),e._uU(8,"No"),e.qZA()()(),e.TgZ(9,"div",6)(10,"button",7),e.NdJ("click",function(){return o.confirmar()}),e.TgZ(11,"span"),e._uU(12,"Si"),e.qZA()()()()()),2&t&&(e.xp6(3),e.Oqu(o.mensaje))},directives:[w.lW],styles:[""]}),r})();var Z=p(2181),ie=p(6087);function se(r,s){if(1&r&&(e.ynx(0),e._uU(1),e.BQk()),2&r){const t=e.oxw();e.xp6(1),e.hij(" ",t.torneosCount," ")}}function ae(r,s){1&r&&(e.TgZ(0,"th",34),e._uU(1," Torneo "),e.qZA())}function ne(r,s){if(1&r&&(e.TgZ(0,"td",35)(1,"span",36),e._uU(2),e.qZA()()),2&r){const t=s.$implicit;e.xp6(2),e.hij(" ",t.nombre," ")}}function le(r,s){1&r&&(e.TgZ(0,"th",34),e._uU(1," Rama "),e.qZA())}function ce(r,s){if(1&r&&(e.TgZ(0,"td",35)(1,"span",37),e._uU(2),e.ALo(3,"titlecase"),e.qZA()()),2&r){const t=s.$implicit;e.xp6(2),e.hij(" ",e.lcZ(3,1,t.rama)," ")}}function ue(r,s){1&r&&(e.TgZ(0,"th",34),e._uU(1," Categoria "),e.qZA())}function de(r,s){if(1&r&&(e.TgZ(0,"td",38)(1,"span",39),e._uU(2),e.qZA()()),2&r){const t=s.$implicit;e.xp6(2),e.hij(" ",t.categoria," ")}}function pe(r,s){1&r&&(e.TgZ(0,"th",34),e._uU(1," Estado "),e.qZA())}const he=function(r,s,t,o,i){return{"bg-amber-200 text-amber-800 dark:bg-amber-600 dark:text-amber-50":r,"bg-sky-200 text-sky-800 dark:bg-sky-600 dark:text-sky-50":s,"bg-green-200 text-green-800 dark:bg-green-600 dark:text-green-50":t,"bg-purple-200 text-purple-800 dark:bg-purple-600 dark:text-purple-50":o,"bg-red-200 text-red-800 dark:bg-red-600 dark:text-red-50":i}};function fe(r,s){if(1&r&&(e.TgZ(0,"td",35)(1,"span",40)(2,"span",41),e._uU(3),e.qZA()()()),2&r){const t=s.$implicit;e.xp6(1),e.Q6J("ngClass",e.qbA(2,he,"Programacion"===t.estado,"Inicial"===t.estado,"En Proceso"===t.estado,"Sorteo"===t.estado,"Finalizado"===t.estado)),e.xp6(2),e.hij(" ",t.estado," ")}}function me(r,s){1&r&&(e.TgZ(0,"th",34),e._uU(1," Fase actual "),e.qZA())}function ge(r,s){if(1&r&&(e.TgZ(0,"td",38)(1,"span",39),e._uU(2),e.ALo(3,"titlecase"),e.qZA()()),2&r){const t=s.$implicit;e.xp6(2),e.hij(" ",e.lcZ(3,1,t.fase_actual)," ")}}function _e(r,s){1&r&&(e.TgZ(0,"th",34),e._uU(1," Acciones "),e.qZA())}function be(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"mat-icon",45),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit;return e.oxw(2).iniciarTorneo(i)}),e.qZA()}2&r&&e.Q6J("svgIcon","feather:play")}function xe(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"mat-icon",46),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit;return e.oxw(2).dialogFinalizarTorneo(i)}),e.qZA()}2&r&&e.Q6J("svgIcon","feather:square")}function ve(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"td",38)(1,"div")(2,"mat-icon",42),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw(2).editarTorneo(a)}),e.qZA(),e._uU(3,"\xa0\xa0 "),e.YNc(4,be,1,1,"mat-icon",43),e._uU(5,"\xa0 "),e.YNc(6,xe,1,1,"mat-icon",44),e.qZA()()}if(2&r){const t=s.$implicit;e.xp6(2),e.Q6J("svgIcon","feather:edit"),e.xp6(2),e.Q6J("ngIf","Inicial"===t.estado),e.xp6(2),e.Q6J("ngIf","En Proceso"===t.estado)}}function Te(r,s){1&r&&e._UZ(0,"tr",47)}function Ce(r,s){1&r&&e._UZ(0,"tr",48)}function we(r,s){if(1&r&&(e.TgZ(0,"div",20)(1,"table",21),e.ynx(2,22),e.YNc(3,ae,2,0,"th",23),e.YNc(4,ne,3,1,"td",24),e.BQk(),e.ynx(5,25),e.YNc(6,le,2,0,"th",23),e.YNc(7,ce,4,3,"td",24),e.BQk(),e.ynx(8,26),e.YNc(9,ue,2,0,"th",23),e.YNc(10,de,3,1,"td",27),e.BQk(),e.ynx(11,28),e.YNc(12,pe,2,0,"th",23),e.YNc(13,fe,4,8,"td",24),e.BQk(),e.ynx(14,29),e.YNc(15,me,2,0,"th",23),e.YNc(16,ge,4,3,"td",27),e.BQk(),e.ynx(17,30),e.YNc(18,_e,2,0,"th",23),e.YNc(19,ve,7,3,"td",31),e.BQk(),e.YNc(20,Te,1,0,"tr",32),e.YNc(21,Ce,1,0,"tr",33),e.qZA()()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("dataSource",t.tablaTorneosData)("trackBy",t.trackByFn),e.xp6(19),e.Q6J("matHeaderRowDef",t.tablaTorneosColumns),e.xp6(1),e.Q6J("matRowDefColumns",t.tablaTorneosColumns)}}function je(r,s){1&r&&(e.TgZ(0,"div",49),e._uU(1,"\xa1No hay torneos para mostrar!"),e.qZA())}const Ze=function(){return{"=0":"No tienes torneos","=1":"torneo",other:"torneos"}};let Je=(()=>{class r{constructor(t,o,i,a,u){this._changeDetectorRef=t,this._matDialog=o,this._router=i,this._activatedRoute=a,this._torneoService=u,this._unsubscribeAll=new v.x,this.tablaTorneosData=new l.by([]),this.tablaTorneosColumns=["torneo","rama","categoria","estado","fase","acciones"],this.torneos=[],this.torneosCount=0,this.pagina=0,this.Toast=h().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:m=>{m.addEventListener("mouseenter",h().stopTimer),m.addEventListener("mouseleave",h().resumeTimer)}})}ngOnInit(){this._torneoService.torneos$.pipe((0,n.R)(this._unsubscribeAll)).subscribe(t=>{this.torneos=t,this.tablaTorneosData=new l.by(t),this.torneosCount=t.length,this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}crearTorneoDialogo(){this._matDialog.open(y,{data:{accion:"Crear"}}).afterClosed().subscribe(o=>{void 0!==o&&(o.fecha_inicio="2023-12-01T05:00:00.000Z",o.fecha_fin="2023-12-10T05:00:00.000Z",this.crearTorneo(o))})}crearTorneo(t){this._torneoService.crearTorneo(t).pipe((0,n.R)(this._unsubscribeAll)).subscribe(o=>{this.Toast.fire({icon:"success",title:"El torneo ha sido creado con exito."}),this.obtenerTorneos(),this._changeDetectorRef.markForCheck()},o=>{this.Toast.fire({icon:"error",title:o.error.message})})}obtenerTorneos(){this._torneoService.obtenerTorneosRefresh().pipe((0,n.R)(this._unsubscribeAll)).subscribe(t=>{this._torneoService.torneos=t,this._changeDetectorRef.markForCheck()},t=>{this.Toast.fire({icon:"error",title:t.error.message})})}trackByFn(t,o){return o.id||t}onPageChange(t){}editarTorneo(t){this._router.navigate(["./",t.id],{relativeTo:this._activatedRoute})}iniciarTorneo(t){this._torneoService.obtenerInscritosTorneo(t.id).pipe((0,n.R)(this._unsubscribeAll)).subscribe(o=>{this._matDialog.open(re,{data:{accion:"Confirmar",inscritos:o.length,torneo:t,tipoTorneo:t.tipo_torneo}}).afterClosed().subscribe(a=>{void 0!==a&&this.finalizarInscripciones(t,a.formar)})},o=>{this.Toast.fire({icon:"error",title:o.error.mensaje})})}finalizarInscripciones(t,o){this._torneoService.finalizarInscripciones(t.id).pipe((0,n.R)(this._unsubscribeAll)).subscribe(i=>{this.Toast.fire({icon:"success",title:"Se han cerrado las inscripciones del torneo, ahora se realizara el sorteo de la fase de grupos."}),o&&this.sortearGrupos(t)},i=>{this.Toast.fire({icon:"error",title:i.error.mensaje})})}sortearGrupos(t){this._torneoService.sortearGrupos(t.id).pipe((0,n.R)(this._unsubscribeAll)).subscribe(o=>{this.Toast.fire({icon:"success",title:"Se ha sorteado con exito la fase de grupos."}),this.obtenerTorneos()},o=>{this.Toast.fire({icon:"error",title:o.error.mensaje})})}dialogFinalizarTorneo(t){this._matDialog.open(j,{data:{mensaje:"\xbfEst\xe1s seguro que quieres finalizar este torneo?"}}).afterClosed().subscribe(i=>{void 0!==i&&this.finalizarTorneo(t)})}finalizarTorneo(t){this._torneoService.sortearSiguienteFase(t.id).pipe((0,n.R)(this._unsubscribeAll)).subscribe(o=>{this.Toast.fire({icon:"success",title:`Torneo Finalizado, Felicitaciones ${o.ganador} `}),this.obtenerTorneos()},o=>{this.Toast.fire({icon:"error",title:o.error.mensaje})})}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(e.sBO),e.Y36(g.uw),e.Y36(k.F0),e.Y36(k.gz),e.Y36(_))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-list"]],decls:28,vars:15,consts:[[1,"flex","flex-col","flex-auto","w-full"],[1,"flex","flex-wrap","w-full","max-w-screen-xl","mx-auto","p-6","md:p-8"],[1,"flex","items-center","justify-between","w-full"],[1,"text-4xl","font-extrabold","tracking-tight","leading-none"],[1,"ml-0.5","font-medium","text-secondary","text-lg"],[4,"ngIf"],[1,"flex","items-center","ml-6"],["mat-flat-button","",1,"hidden","sm:inline-flex","text-white","font-bold","text-lg",3,"color","click"],[1,"icon-size-5",3,"svgIcon"],[1,"ml-2"],[1,"sm:hidden"],["mat-icon-button","",3,"matMenuTriggerFor"],[3,"svgIcon"],["actionsMenu","matMenu"],["mat-menu-item","",3,"click"],[1,"grid","grid-cols-1","xl:grid-cols-1","gap-8","w-full","mt-8"],[1,"xl:col-span-2","flex","flex-col","flex-auto","bg-card","shadow","rounded-xl","overflow-hidden"],["class","overflow-x-auto mx-6",4,"ngIf","ngIfElse"],["elseNoTorneos",""],["pageSize","30","aria-label","Select page",1,"absolute","inset-x-0","bottom-0","border-b","sm:border-t","sm:border-b-0","z-10","bg-gray-50","dark:bg-transparent",3,"length","showFirstLastButtons","pageIndex","page"],[1,"overflow-x-auto","mx-6"],["mat-table","",1,"w-full","bg-transparent",3,"dataSource","trackBy"],["matColumnDef","torneo"],["mat-header-cell","","class","text-black text-lg",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","rama"],["matColumnDef","categoria"],["class"," text-center","mat-cell","",4,"matCellDef"],["matColumnDef","estado"],["matColumnDef","fase"],["matColumnDef","acciones"],["class","text-center","mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["class","order-row h-16","mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","",1,"text-black","text-lg"],["mat-cell",""],[1,"pr-6","font-medium","text-base","whitespace-nowrap"],[1,"pr-6","whitespace-nowrap","text-base","font-medium"],["mat-cell","",1,"text-center"],[1,"pr-6","whitespace-nowrap","font-semibold","text-base"],[1,"inline-flex","items-center","font-bold","text-xs","px-2.5","py-0.5","rounded-full","tracking-wide","uppercase",3,"ngClass"],[1,"leading-relaxed","whitespace-nowrap","text-base"],["matTooltip","Editar Torneo",1,"icon-size-5","cursor-pointer","text-naranmi","hover:opacity-60",3,"svgIcon","click"],["matTooltip","Iniciar Torneo","class","icon-size-5 cursor-pointer text-naranmi hover:opacity-60",3,"svgIcon","click",4,"ngIf"],["matTooltip","Finalizar Torneo","class","icon-size-5 cursor-pointer text-naranmi hover:opacity-60",3,"svgIcon","click",4,"ngIf"],["matTooltip","Iniciar Torneo",1,"icon-size-5","cursor-pointer","text-naranmi","hover:opacity-60",3,"svgIcon","click"],["matTooltip","Finalizar Torneo",1,"icon-size-5","cursor-pointer","text-naranmi","hover:opacity-60",3,"svgIcon","click"],["mat-header-row",""],["mat-row","",1,"order-row","h-16"],[1,"p-8","sm:p-16","border-t","text-4xl","font-semibold","tracking-tight","text-center"]],template:function(t,o){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"div",3),e._uU(5,"Torneos"),e.qZA(),e.TgZ(6,"div",4),e.YNc(7,se,2,1,"ng-container",5),e._uU(8),e.ALo(9,"i18nPlural"),e.qZA()(),e.TgZ(10,"div",6)(11,"button",7),e.NdJ("click",function(){return o.crearTorneoDialogo()}),e._UZ(12,"mat-icon",8),e.TgZ(13,"span",9),e._uU(14,"Crear torneo"),e.qZA()(),e.TgZ(15,"div",10)(16,"button",11),e._UZ(17,"mat-icon",12),e.qZA(),e.TgZ(18,"mat-menu",null,13)(20,"button",14),e.NdJ("click",function(){return o.crearTorneoDialogo()}),e._uU(21,"Crear torneo"),e.qZA()()()()(),e.TgZ(22,"div",15)(23,"div",16),e.YNc(24,we,22,4,"div",17),e.YNc(25,je,2,0,"ng-template",null,18,e.W1O),e.qZA(),e.TgZ(27,"mat-paginator",19),e.NdJ("page",function(a){return o.onPageChange(a)}),e.qZA()()()()),2&t){const i=e.MAs(19),a=e.MAs(26);e.xp6(7),e.Q6J("ngIf",o.torneosCount>0),e.xp6(1),e.hij(" ",e.xi3(9,11,o.torneosCount,e.DdM(14,Ze))," "),e.xp6(3),e.Q6J("color","primary"),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:plus-circle"),e.xp6(4),e.Q6J("matMenuTriggerFor",i),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:dots-vertical"),e.xp6(7),e.Q6J("ngIf",o.torneos.length)("ngIfElse",a),e.xp6(3),e.Q6J("length",o.torneosCount)("showFirstLastButtons",!0)("pageIndex",o.pagina)}},directives:[d.O5,w.lW,J.Hw,Z.p6,Z.VK,Z.OP,l.BZ,l.w1,l.fO,l.ge,l.Dz,l.ev,d.mk,I.gM,l.as,l.XQ,l.nj,l.Gk,ie.NW],pipes:[d.Gx,d.rS],styles:["table[_ngcontent-%COMP%]{width:100%}.mat-mdc-row[_ngcontent-%COMP%]   .mat-mdc-cell[_ngcontent-%COMP%]{border-bottom:1px solid transparent;border-top:1px solid transparent;cursor:pointer}.mat-mdc-row[_ngcontent-%COMP%]:hover   .mat-mdc-cell[_ngcontent-%COMP%]{border-color:currentColor}.th.mat-header-cell[_ngcontent-%COMP%]{border-bottom:1px solid saddlebrown!important}th[_ngcontent-%COMP%]{border-bottom:2px solid #E33022!important}"]}),r})();function ke(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"div",12)(1,"div",13),e._uU(2),e.qZA(),e.TgZ(3,"div",14)(4,"input",15),e.NdJ("ngModelChange",function(i){return e.CHM(t).$implicit.jugador1=i}),e.qZA()(),e.TgZ(5,"div",14)(6,"input",15),e.NdJ("ngModelChange",function(i){return e.CHM(t).$implicit.jugador2=i}),e.qZA()()()}if(2&r){const t=s.$implicit,o=s.index,i=e.oxw();e.xp6(2),e.hij(" ",o+1," "),e.xp6(2),e.Q6J("disabled",i.disableInputs)("ngModel",t.jugador1),e.xp6(2),e.Q6J("disabled",i.disableInputs2)("ngModel",t.jugador2)}}let P=(()=>{class r{constructor(t,o,i,a){this.matDialogRef=t,this._formBuilder=o,this._changeDetectorRef=i,this.data=a,this.etapa="",this.sets={},this.partido={},this.puntos=[],this.modalidad="",this.tipoJugador="",this.tipoJugador2="",this.disableInputs=!1,this.disableInputs2=!1,this.disableShow=!1,this.faseActual="",this.etapa=a.etapa,this.sets=a.sets,this.partido=a.partido,this.faseActual=a.faseActual,(this.faseActual!==this.etapa||"Finalizado"===a.estado)&&(this.disableInputs=!0,this.disableInputs2=!0,this.disableShow=!0),this.tipoJugador=a.tipoJugador1,this.tipoJugador2=a.tipoJugador2,null!==this.partido.resultado?this.ordenarPuntosEditar():this.ordenarPuntos(),this.modalidad="singles"===a.modalidad?"jugador":"pareja",this.Toast=h().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:u=>{u.addEventListener("mouseenter",h().stopTimer),u.addEventListener("mouseleave",h().resumeTimer)}})}ngOnInit(){}ordenarPuntos(){for(let t=0;t<this.sets.sets_totales;t++){let o={jugador1:0,jugador2:0};this.partido[this.tipoJugador].nombre||(o={jugador1:0,jugador2:1},this.disableInputs=!0),this.partido[this.tipoJugador2].nombre||(o={jugador1:1,jugador2:0},this.disableInputs2=!0),this.puntos.push(o)}}ordenarPuntosEditar(){this.partido.resultado.sets.forEach(t=>{let o=t.marcador.split("-");this.puntos.push({jugador1:parseInt(o[0]),jugador2:parseInt(o[1])})})}confirmar(){let t=!1;t=this.validarSets(),t&&this.matDialogRef.close(this.determinarGanador())}validarSets(){let t=!1,o=0,i=0;return this.puntos.forEach(a=>{o+=a.jugador1,i+=a.jugador2}),!this.partido[this.tipoJugador].nombre&&o>i?(this.Toast.fire({icon:"error",title:"El jugador 1 no puede tener mas puntos que el jugador 2."}),t=!1,t):!this.partido[this.tipoJugador2].nombre&&i>o?(this.Toast.fire({icon:"error",title:"El jugador 2 no puede tener mas puntos que el jugador 1."}),t=!1,t):(o!==i?t=!0:(this.Toast.fire({icon:"error",title:"No puede haber haber empates en puntos totales."}),t=!1),t)}determinarGanador(){let t=0,o=0,i=0,a=0,u=0,m=0,R=[];return this.puntos.forEach(b=>{R.push({marcador:`${b.jugador1}-${b.jugador2}`}),t+=b.jugador1,o+=b.jugador2,b.jugador1!==b.jugador2&&(b.jugador1>b.jugador2?(i+=1,m+=1):(a+=1,u+=1))}),this.ordenarDataPartido(R,i,a,t,o,u,m)}ordenarDataPartido(t,o,i,a,u,m,R){let b={sets:t};return a>u?(b.ganador={tipo:this.modalidad,id:this.partido[this.tipoJugador].id,setsGanados:o,setsPerdidos:m,puntosSets:a},b.perdedor={tipo:this.modalidad,id:this.partido[this.tipoJugador2].id,setsGanados:i,setsPerdidos:R,puntosSets:u}):(b.ganador={tipo:this.modalidad,id:this.partido[this.tipoJugador2].id,setsGanados:i,setsPerdidos:R,puntosSets:u},b.perdedor={tipo:this.modalidad,id:this.partido[this.tipoJugador].id,setsGanados:o,setsPerdidos:m,puntosSets:a}),b}onNoClick(){this.matDialogRef.close()}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(g.so),e.Y36(c.qu),e.Y36(e.sBO),e.Y36(g.WI))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-editar-partido"]],decls:27,vars:12,consts:[[1,"flex","flex-col","max-w-160","md:min-w-160","max-h-screen","-m-6"],[1,"flex","flex-0","items-center","justify-between","h-12","pr-3","sm:pr-5","pl-6","sm:pl-8","text-on-primary","p-3","border-b-4","mr-4","ml-4","color-borde","mt-4"],[1,"text-2xl","font-medium","text-black","mb-4"],["mat-icon-button","",3,"tabIndex","click"],[1,"text-current",3,"svgIcon"],[1,"mt-4","mb-4","px-4"],[1,"grid","grid-cols-3","gap-2"],[1,"flex","flex-col","text-center"],[1,"font-medium","text-lg"],["class","grid grid-cols-3 gap-2 mt-4",4,"ngFor","ngForOf"],[1,"flex","justify-center","mb-4"],["matTooltip","Confirmar","mat-flat-button","",1,"ml-4","bg-verdemi","text-white","text-xl","font-bold",3,"disabled","click"],[1,"grid","grid-cols-3","gap-2","mt-4"],[1,"font-semibold","text-lg","text-center"],[1,"input-number-set"],["type","number","name","setCount","id","setCount","min","0",1,"w-9/12","sm:w-4/12",3,"disabled","ngModel","ngModelChange"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3,"Editar partido"),e.qZA(),e.TgZ(4,"button",3),e.NdJ("click",function(){return o.onNoClick()}),e._UZ(5,"mat-icon",4),e.qZA()(),e.TgZ(6,"div",5)(7,"div",6)(8,"div",7)(9,"span",8),e._uU(10," Sets "),e.qZA()(),e.TgZ(11,"div",7)(12,"span",8),e._uU(13),e.ALo(14,"titlecase"),e.qZA(),e.TgZ(15,"span"),e._uU(16),e.qZA()(),e.TgZ(17,"div",7)(18,"span",8),e._uU(19),e.ALo(20,"titlecase"),e.qZA(),e.TgZ(21,"span"),e._uU(22),e.qZA()()(),e.YNc(23,ke,7,5,"div",9),e.qZA(),e.TgZ(24,"div",10)(25,"button",11),e.NdJ("click",function(){return o.confirmar()}),e._uU(26," Confirmar "),e.qZA()()()),2&t&&(e.xp6(4),e.Q6J("tabIndex",-1),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:x"),e.xp6(8),e.hij("",e.lcZ(14,8,o.modalidad)," 1"),e.xp6(3),e.Oqu(o.partido[o.tipoJugador].nombre),e.xp6(3),e.hij("",e.lcZ(20,10,o.modalidad)," 2"),e.xp6(3),e.Oqu(o.partido[o.tipoJugador2].nombre),e.xp6(1),e.Q6J("ngForOf",o.puntos),e.xp6(2),e.Q6J("disabled",o.disableShow))},directives:[w.lW,J.Hw,d.sg,c.qQ,c.wV,c.Fj,c.JJ,c.On,I.gM],pipes:[d.rS],styles:[".color-borde[_ngcontent-%COMP%]{border-color:#e33022}.mat-radio-inner-circle[_ngcontent-%COMP%]{background-color:#ffd484!important}.input-number-set[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center}.input-number-set[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background-color:#bebebeb1;border-radius:7px;padding:5px;font-size:15px;font-weight:800;text-align:center}"]}),r})();var D=p(4707);function Ae(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"div",16)(1,"div",17)(2,"div",18),e._uU(3),e.qZA(),e.TgZ(4,"div")(5,"mat-icon",19),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw(2).addJugadorToGrupo(a)}),e.qZA()()()()}if(2&r){const t=s.$implicit,o=e.oxw(2);e.xp6(2),e.s9C("matTooltip",(null==t[o.tipojuego]?null:t[o.tipojuego].nombre)||(null==t[o.tipojuego]?null:t[o.tipojuego].id)),e.xp6(1),e.hij(" ",(null==t[o.tipojuego]?null:t[o.tipojuego].nombre)||(null==t[o.tipojuego]?null:t[o.tipojuego].id)," "),e.xp6(2),e.Q6J("svgIcon","mat_outline:add")}}function Ie(r,s){if(1&r&&(e.TgZ(0,"div",12)(1,"div",13)(2,"div",14),e.YNc(3,Ae,6,3,"div",15),e.ALo(4,"async"),e.qZA()()()),2&r){const t=e.oxw();e.xp6(3),e.Q6J("ngForOf",e.lcZ(4,1,t.filteredJugadores))}}function Re(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"div",16)(1,"div",17)(2,"div",18),e._uU(3),e.qZA(),e.TgZ(4,"div")(5,"mat-icon",19),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw(2).addParejaTogrupo(a)}),e.qZA()()()()}if(2&r){const t=s.$implicit,o=e.oxw(2);e.xp6(2),e.hYB("matTooltip","",null==t[o.tipojuego]?null:t[o.tipojuego].jugador1.nombre," - ",null==t[o.tipojuego]?null:t[o.tipojuego].jugador2.nombre,""),e.xp6(1),e.AsE(" ",null==t[o.tipojuego]?null:t[o.tipojuego].jugador1.nombre," - ",null==t[o.tipojuego]?null:t[o.tipojuego].jugador2.nombre," "),e.xp6(2),e.Q6J("svgIcon","mat_outline:add")}}function ye(r,s){if(1&r&&(e.TgZ(0,"div",12)(1,"div",13)(2,"div",14),e.YNc(3,Re,6,5,"div",15),e.ALo(4,"async"),e.qZA()()()),2&r){const t=e.oxw();e.xp6(3),e.Q6J("ngForOf",e.lcZ(4,1,t.filteredJugadores))}}let F=(()=>{class r{constructor(t,o,i,a,u){this.matDialogRef=t,this._formBuilder=o,this._changeDetectorRef=i,this.data=a,this._torneoService=u,this._unsubscribeAll=new v.x,this._onDestroy=new v.x,this.tipoAccion="Crear",this.inscritos=[],this.grupoSelected={},this.jugadoresFiltroCtrl=new c.NI,this.filteredJugadores=new D.t(null),this.GRUPOS=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],this.contGrupos=0,this.tipojuego="",this.tipoAccion=a.accion,this.contGrupos=a.cantGrupos,this.tipojuego=a.tipojuego,"Editar"===a.accion&&(this.grupoSelected=a.grupo)}ngOnInit(){this._torneoService.inscritosTorneo$.pipe((0,n.R)(this._unsubscribeAll)).subscribe(t=>{this.inscritos=t,this.filteredJugadores.next(t.slice()),this.jugadoresFiltroCtrl.valueChanges.pipe((0,n.R)(this._onDestroy)).subscribe(()=>{"jugador"===this.tipojuego?this.filtroBusquedaJugador(t):this.filtroBusquedaPareja(t)}),this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}addJugadorToGrupo(t){"Editar"===this.data.accion?this.editarGrupos(t):this.crearGrupo(t)}addParejaTogrupo(t){"Editar"===this.data.accion?this.editarGrupos(t):this.crearGrupoPareja(t)}crearGrupo(t){let o={nombre_grupo:this.GRUPOS[this.contGrupos],completado:!1,participantes:[Object.assign({},t)]};this.matDialogRef.close(o)}crearGrupoPareja(t){let o={nombre_grupo:this.GRUPOS[this.contGrupos],completado:!1,participantes:[Object.assign({},t)]};this.matDialogRef.close(o)}editarGrupos(t){this.matDialogRef.close(t)}filtroBusquedaJugador(t){if(!t)return;let o=this.jugadoresFiltroCtrl.value;o?(o=o.toLowerCase(),this.filteredJugadores.next(t.filter(i=>i.jugador.nombre.toLowerCase().indexOf(o)>-1))):this.filteredJugadores.next(t.slice())}filtroBusquedaPareja(t){if(!t)return;let o=this.jugadoresFiltroCtrl.value;o?(o=o.toLowerCase(),this.filteredJugadores.next(t.filter(i=>i.pareja.jugador1.nombre.toLowerCase().indexOf(o)>-1||i.pareja.jugador2.nombre.toLowerCase().indexOf(o)>-1))):this.filteredJugadores.next(t.slice())}onNoClick(){this.matDialogRef.close()}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(g.so),e.Y36(c.qu),e.Y36(e.sBO),e.Y36(g.WI),e.Y36(_))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-crear-grupo"]],decls:14,vars:7,consts:[[1,"flex","flex-col","max-w-240","md:min-w-100","max-h-screen","-m-6","p-5"],[1,"flex","flex-0","items-center","justify-between","h-12","pr-3","sm:pr-5","pl-6","sm:pl-8","text-on-primary","p-3","border-b-4","mr-4","ml-4","color-borde","mt-4"],[1,"text-2xl","font-medium","text-black","mb-4"],["mat-icon-button","",3,"tabIndex","click"],[1,"text-current",3,"svgIcon"],[1,"mt-4","mb-4","w-full"],[1,"flex","justify-center"],[1,"w-10/12"],["id","jugador","type","text","matInput","",3,"formControl"],["matPrefix","",1,"icon-size-7","text-gray-400",3,"svgIcon"],["class","flex justify-center w-full",4,"ngIf","ngIfElse"],["elseParejas",""],[1,"flex","justify-center","w-full"],[1,"overflow-y-auto","h-90","w-10/12","overflow-x-hidden"],[1,"grid","grid-cols-1","pr-2"],["class","border-b-4 mb-2",4,"ngFor","ngForOf"],[1,"border-b-4","mb-2"],[1,"flex","flex-row","justify-between"],["matTooltipClass","tooltip-font-size",1,"font-normal","text-xl","truncate",3,"matTooltip"],[1,"text-verdemi","font-bold","icon-display-delete","cursor-pointer",3,"svgIcon","click"]],template:function(t,o){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3),e.qZA(),e.TgZ(4,"button",3),e.NdJ("click",function(){return o.onNoClick()}),e._UZ(5,"mat-icon",4),e.qZA()(),e.TgZ(6,"div",5)(7,"div",6)(8,"mat-form-field",7),e._UZ(9,"input",8)(10,"mat-icon",9),e.qZA()(),e.YNc(11,Ie,5,3,"div",10),e.YNc(12,ye,5,3,"ng-template",null,11,e.W1O),e.qZA()()),2&t){const i=e.MAs(13);e.xp6(3),e.hij("",o.tipoAccion," grupo"),e.xp6(1),e.Q6J("tabIndex",-1),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:x"),e.xp6(4),e.Q6J("formControl",o.jugadoresFiltroCtrl),e.xp6(1),e.Q6J("svgIcon","mat_outline:search"),e.xp6(1),e.Q6J("ngIf","jugador"===o.tipojuego)("ngIfElse",i)}},directives:[w.lW,J.Hw,x.KE,A.Nt,c.Fj,c.JJ,c.oH,x.qo,d.O5,d.sg,I.gM],pipes:[d.Ov],styles:["::-webkit-scrollbar{width:10px}::-webkit-scrollbar-track{background:#f1f1f1}::-webkit-scrollbar-thumb{background:#888;border-radius:5px}::-webkit-scrollbar-thumb:hover{background:#555}.color-borde{border-color:#e33022}.mat-radio-inner-circle{background-color:#ffd484!important}.input-select-per{width:100%;display:flex;flex-direction:row;background-color:#bebebeb1;border-radius:7px;padding:8px;font-size:15px;font-weight:600}.input-select-per mat-icon{margin-right:10px}.input-select-per mat-select{width:100%}.mat-form-field.mat-form-field-appearance-fill .mat-form-field-wrapper .mat-form-field-flex,.mat-form-field.mat-form-field-appearance-fill.mat-focused .mat-form-field-wrapper .mat-form-field-flex{border-radius:15px!important;background-color:#bebebe72!important}.mat-form-field input{font-size:18px;font-weight:700}.icon-display-delete{transform:scale(1.4)}.tooltip-font-size{font-size:1rem}\n"],encapsulation:2}),r})();function Fe(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"div",17)(1,"div",18)(2,"div",19),e._uU(3),e.qZA(),e.TgZ(4,"div")(5,"mat-icon",20),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit;return e.oxw(2).addJugador(i)}),e.qZA()()()()}if(2&r){const t=e.oxw().$implicit;e.xp6(2),e.s9C("matTooltip",t.nombre||t.id),e.xp6(1),e.hij(" ",t.nombre||t.id," "),e.xp6(2),e.Q6J("svgIcon","mat_outline:add")}}function Pe(r,s){if(1&r&&(e.ynx(0),e.YNc(1,Fe,6,3,"div",16),e.BQk()),2&r){const t=s.$implicit;e.xp6(1),e.Q6J("ngIf",!t.show&&!1!==t.show)}}function De(r,s){if(1&r&&(e.TgZ(0,"div",12)(1,"div",13)(2,"div",14),e.YNc(3,Pe,2,1,"ng-container",15),e.ALo(4,"async"),e.qZA()()()),2&r){const t=e.oxw();e.xp6(3),e.Q6J("ngForOf",e.lcZ(4,1,t.filteredJugadores))}}function Ee(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"div",17)(1,"div",18)(2,"div",19),e._uU(3),e.qZA(),e.TgZ(4,"div")(5,"mat-icon",20),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit;return e.oxw(2).addJugador(i)}),e.qZA()()()()}if(2&r){const t=e.oxw().$implicit;e.xp6(2),e.hYB("matTooltip","",t.jugador1," - ",t.jugador2,""),e.xp6(1),e.AsE(" ",t.jugador1," - ",t.jugador2," "),e.xp6(2),e.Q6J("svgIcon","mat_outline:add")}}function Se(r,s){if(1&r&&(e.ynx(0),e.YNc(1,Ee,6,5,"div",16),e.BQk()),2&r){const t=s.$implicit;e.xp6(1),e.Q6J("ngIf",!t.show&&!1!==t.show)}}function qe(r,s){if(1&r&&(e.TgZ(0,"div",12)(1,"div",13)(2,"div",14),e.YNc(3,Se,2,1,"ng-container",15),e.ALo(4,"async"),e.qZA()()()),2&r){const t=e.oxw();e.xp6(3),e.Q6J("ngForOf",e.lcZ(4,1,t.filteredJugadores))}}let E=(()=>{class r{constructor(t,o,i,a,u){this.matDialogRef=t,this._formBuilder=o,this._changeDetectorRef=i,this.data=a,this._torneoService=u,this._unsubscribeAll=new v.x,this._onDestroy=new v.x,this.jugadoresFiltroCtrl=new c.NI,this.filteredJugadores=new D.t(null),this.tipojuego="",this.torneo={},this.inscritos=[],this.tipojuego=a.tipojuego,this.inscritos=a.inscritos,this.torneo=a.torneo,this.Toast=h().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:m=>{m.addEventListener("mouseenter",h().stopTimer),m.addEventListener("mouseleave",h().resumeTimer)}}),"singles"===this.torneo.modalidad?this.obtenerJugadores():this.obtenerParejas()}ngOnInit(){}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}onNoClick(){this.matDialogRef.close()}obtenerJugadores(){this._torneoService.obtenerJugadores({rama:this.torneo.rama,categoria:this.torneo.categoria}).pipe((0,n.R)(this._unsubscribeAll)).subscribe(t=>{const o=this.ordenarJugadores(t.jugadores);this.filteredJugadores.next(o.slice()),this.jugadoresFiltroCtrl.valueChanges.pipe((0,n.R)(this._onDestroy)).subscribe(()=>{this.filtroBusquedaJugador(o)})},t=>{this.Toast.fire({icon:"error",title:t.error.message})})}ordenarJugadores(t){let o=[];return this.inscritos.forEach(i=>{t.forEach(a=>{i.jugador.id===a.id&&(a.show=!1)})}),o=t,o}obtenerParejas(){this._torneoService.obtenerParejas({rama:this.torneo.rama,categoria:this.torneo.categoria}).pipe((0,n.R)(this._unsubscribeAll)).subscribe(t=>{const o=this.ordernarParejas(t.parejas);this.filteredJugadores.next(o.slice()),this.jugadoresFiltroCtrl.valueChanges.pipe((0,n.R)(this._onDestroy)).subscribe(()=>{this.filtroBusquedaPareja(o)})},t=>{this.Toast.fire({icon:"error",title:t.error.message})})}ordernarParejas(t){let o=[];return this.inscritos.forEach(i=>{t.forEach(a=>{i.pareja.id===a.id&&(a.show=!1)})}),o=t,o}addJugador(t){this.matDialogRef.close(t.id)}filtroBusquedaJugador(t){if(!t)return;let o=this.jugadoresFiltroCtrl.value;o?(o=o.toLowerCase(),this.filteredJugadores.next(t.filter(i=>i.nombre.toLowerCase().indexOf(o)>-1))):this.filteredJugadores.next(t.slice())}filtroBusquedaPareja(t){if(!t)return;let o=this.jugadoresFiltroCtrl.value;o?(o=o.toLowerCase(),this.filteredJugadores.next(t.filter(i=>i.jugador1.toLowerCase().indexOf(o)>-1||i.jugador2.toLowerCase().indexOf(o)>-1))):this.filteredJugadores.next(t.slice())}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(g.so),e.Y36(c.qu),e.Y36(e.sBO),e.Y36(g.WI),e.Y36(_))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-inscribir-jugador"]],decls:15,vars:9,consts:[[1,"flex","flex-col","max-w-240","md:min-w-100","max-h-screen","-m-6","p-5"],[1,"flex","flex-0","items-center","justify-between","h-12","pr-3","sm:pr-5","pl-6","sm:pl-8","text-on-primary","p-3","border-b-4","mr-4","ml-4","color-borde","mt-4"],[1,"text-2xl","font-medium","text-black","mb-4"],["mat-icon-button","",3,"tabIndex","click"],[1,"text-current",3,"svgIcon"],[1,"mt-4","mb-4","w-full"],[1,"flex","justify-center"],[1,"w-10/12"],["id","jugador","type","text","matInput","",3,"formControl"],["matPrefix","",1,"icon-size-7","text-gray-400",3,"svgIcon"],["class","flex justify-center w-full",4,"ngIf","ngIfElse"],["elseParejas",""],[1,"flex","justify-center","w-full"],[1,"overflow-y-auto","h-90","w-10/12","overflow-x-hidden"],[1,"grid","grid-cols-1","pr-2"],[4,"ngFor","ngForOf"],["class","border-b-4 mb-2",4,"ngIf"],[1,"border-b-4","mb-2"],[1,"flex","flex-row","justify-between"],["matTooltipClass","tooltip-font-size",1,"font-normal","text-xl","truncate",3,"matTooltip"],[1,"text-verdemi","font-bold","icon-display-delete","cursor-pointer",3,"svgIcon","click"]],template:function(t,o){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3),e.ALo(4,"titlecase"),e.qZA(),e.TgZ(5,"button",3),e.NdJ("click",function(){return o.onNoClick()}),e._UZ(6,"mat-icon",4),e.qZA()(),e.TgZ(7,"div",5)(8,"div",6)(9,"mat-form-field",7),e._UZ(10,"input",8)(11,"mat-icon",9),e.qZA()(),e.YNc(12,De,5,3,"div",10),e.YNc(13,qe,5,3,"ng-template",null,11,e.W1O),e.qZA()()),2&t){const i=e.MAs(14);e.xp6(3),e.hij("Inscribir ",e.lcZ(4,7,o.tipojuego),""),e.xp6(2),e.Q6J("tabIndex",-1),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:x"),e.xp6(4),e.Q6J("formControl",o.jugadoresFiltroCtrl),e.xp6(1),e.Q6J("svgIcon","mat_outline:search"),e.xp6(1),e.Q6J("ngIf","jugador"===o.tipojuego)("ngIfElse",i)}},directives:[w.lW,J.Hw,x.KE,A.Nt,c.Fj,c.JJ,c.oH,x.qo,d.O5,d.sg,I.gM],pipes:[d.rS,d.Ov],styles:["[_ngcontent-%COMP%]::-webkit-scrollbar{width:10px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#888;border-radius:5px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#555}.color-borde[_ngcontent-%COMP%]{border-color:#e33022}.mat-radio-inner-circle[_ngcontent-%COMP%]{background-color:#ffd484!important}.input-select-per[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:row;background-color:#bebebeb1;border-radius:7px;padding:8px;font-size:15px;font-weight:600}.input-select-per[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:10px}.input-select-per[_ngcontent-%COMP%]   mat-select[_ngcontent-%COMP%]{width:100%}.mat-form-field.mat-form-field-appearance-fill[_ngcontent-%COMP%]   .mat-form-field-wrapper[_ngcontent-%COMP%]   .mat-form-field-flex[_ngcontent-%COMP%], .mat-form-field.mat-form-field-appearance-fill.mat-focused[_ngcontent-%COMP%]   .mat-form-field-wrapper[_ngcontent-%COMP%]   .mat-form-field-flex[_ngcontent-%COMP%]{border-radius:15px!important;background-color:#bebebe72!important}.mat-form-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:18px;font-weight:700}.icon-display-delete[_ngcontent-%COMP%]{transform:scale(1.4)}.tooltip-font-size[_ngcontent-%COMP%]{font-size:1rem}"]}),r})();function Oe(r,s){if(1&r&&(e.TgZ(0,"div",16)(1,"div",17)(2,"div",18),e._uU(3),e.qZA()()()),2&r){const t=s.$implicit;e.xp6(2),e.s9C("matTooltip",t.jugador.nombre||t.jugador.id),e.xp6(1),e.hij(" ",t.jugador.nombre||t.jugador.id," ")}}function Ne(r,s){if(1&r&&(e.TgZ(0,"div",12)(1,"div",13)(2,"div",14),e.YNc(3,Oe,4,2,"div",15),e.ALo(4,"async"),e.qZA()()()),2&r){const t=e.oxw();e.xp6(3),e.Q6J("ngForOf",e.lcZ(4,1,t.filteredJugadores))}}function Ue(r,s){if(1&r&&(e.TgZ(0,"div",16)(1,"div",17)(2,"div",18),e._uU(3),e.qZA()()()),2&r){const t=s.$implicit;e.xp6(2),e.hYB("matTooltip","",t.pareja.jugador1.nombre," - ",t.pareja.jugador2.nombre,""),e.xp6(1),e.AsE(" ",t.pareja.jugador1.nombre," - ",t.pareja.jugador2.nombre," ")}}function Qe(r,s){if(1&r&&(e.TgZ(0,"div",12)(1,"div",13)(2,"div",14),e.YNc(3,Ue,4,4,"div",15),e.ALo(4,"async"),e.qZA()()()),2&r){const t=e.oxw();e.xp6(3),e.Q6J("ngForOf",e.lcZ(4,1,t.filteredJugadores))}}let S=(()=>{class r{constructor(t,o,i,a,u){this.matDialogRef=t,this._formBuilder=o,this._changeDetectorRef=i,this.data=a,this._torneoService=u,this._unsubscribeAll=new v.x,this._onDestroy=new v.x,this.jugadoresFiltroCtrl=new c.NI,this.filteredJugadores=new D.t(null),this.tipojuego="",this.torneo={},this.inscritos=[],this.tipojuego=a.tipojuego,this.torneo=a.torneo,this.Toast=h().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:m=>{m.addEventListener("mouseenter",h().stopTimer),m.addEventListener("mouseleave",h().resumeTimer)}}),this.inscritos=a.inscritos,console.log(this.inscritos),"singles"===this.torneo.modalidad?(this.filteredJugadores.next(this.inscritos.slice()),this.jugadoresFiltroCtrl.valueChanges.pipe((0,n.R)(this._onDestroy)).subscribe(()=>{this.filtroBusquedaJugador(this.inscritos)})):(this.filteredJugadores.next(this.inscritos.slice()),this.jugadoresFiltroCtrl.valueChanges.pipe((0,n.R)(this._onDestroy)).subscribe(()=>{this.filtroBusquedaPareja(this.inscritos)}))}ngOnInit(){}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}onNoClick(){this.matDialogRef.close()}filtroBusquedaJugador(t){if(!t)return;let o=this.jugadoresFiltroCtrl.value;o?(o=o.toLowerCase(),this.filteredJugadores.next(t.filter(i=>i.jugador.nombre.toLowerCase().indexOf(o)>-1))):this.filteredJugadores.next(t.slice())}filtroBusquedaPareja(t){if(!t)return;let o=this.jugadoresFiltroCtrl.value;o?(o=o.toLowerCase(),this.filteredJugadores.next(t.filter(i=>i.pareja.jugador1.nombre.toLowerCase().indexOf(o)>-1||i.pareja.jugador2.nombre.toLowerCase().indexOf(o)>-1))):this.filteredJugadores.next(t.slice())}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(g.so),e.Y36(c.qu),e.Y36(e.sBO),e.Y36(g.WI),e.Y36(_))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-ver-inscritos"]],decls:15,vars:9,consts:[[1,"flex","flex-col","max-w-240","md:min-w-100","max-h-screen","-m-6","p-5"],[1,"flex","flex-0","items-center","justify-between","h-12","pr-3","sm:pr-5","pl-6","sm:pl-8","text-on-primary","p-3","border-b-4","mr-4","ml-4","color-borde","mt-4"],[1,"text-2xl","font-medium","text-black","mb-4"],["mat-icon-button","",3,"tabIndex","click"],[1,"text-current",3,"svgIcon"],[1,"mt-4","mb-4","w-full"],[1,"flex","justify-center"],[1,"w-10/12"],["id","jugador","type","text","matInput","",3,"formControl"],["matPrefix","",1,"icon-size-7","text-gray-400",3,"svgIcon"],["class","flex justify-center w-full",4,"ngIf","ngIfElse"],["elseParejas",""],[1,"flex","justify-center","w-full"],[1,"overflow-y-auto","h-90","w-10/12","overflow-x-hidden"],[1,"grid","grid-cols-1","pr-2"],["class","border-b-4 mb-2",4,"ngFor","ngForOf"],[1,"border-b-4","mb-2"],[1,"flex","flex-row","justify-between"],["matTooltipClass","tooltip-font-size",1,"font-normal","text-xl","truncate",3,"matTooltip"]],template:function(t,o){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3),e.ALo(4,"titlecase"),e.qZA(),e.TgZ(5,"button",3),e.NdJ("click",function(){return o.onNoClick()}),e._UZ(6,"mat-icon",4),e.qZA()(),e.TgZ(7,"div",5)(8,"div",6)(9,"mat-form-field",7),e._UZ(10,"input",8)(11,"mat-icon",9),e.qZA()(),e.YNc(12,Ne,5,3,"div",10),e.YNc(13,Qe,5,3,"ng-template",null,11,e.W1O),e.qZA()()),2&t){const i=e.MAs(14);e.xp6(3),e.hij("Jugadores inscritos - ",e.lcZ(4,7,o.tipojuego),""),e.xp6(2),e.Q6J("tabIndex",-1),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:x"),e.xp6(4),e.Q6J("formControl",o.jugadoresFiltroCtrl),e.xp6(1),e.Q6J("svgIcon","mat_outline:search"),e.xp6(1),e.Q6J("ngIf","jugador"===o.tipojuego)("ngIfElse",i)}},directives:[w.lW,J.Hw,x.KE,A.Nt,c.Fj,c.JJ,c.oH,x.qo,d.O5,d.sg,I.gM],pipes:[d.rS,d.Ov],styles:["[_ngcontent-%COMP%]::-webkit-scrollbar{width:10px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#888;border-radius:5px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#555}.color-borde[_ngcontent-%COMP%]{border-color:#e33022}.mat-radio-inner-circle[_ngcontent-%COMP%]{background-color:#ffd484!important}.input-select-per[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:row;background-color:#bebebeb1;border-radius:7px;padding:8px;font-size:15px;font-weight:600}.input-select-per[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:10px}.input-select-per[_ngcontent-%COMP%]   mat-select[_ngcontent-%COMP%]{width:100%}.mat-form-field.mat-form-field-appearance-fill[_ngcontent-%COMP%]   .mat-form-field-wrapper[_ngcontent-%COMP%]   .mat-form-field-flex[_ngcontent-%COMP%], .mat-form-field.mat-form-field-appearance-fill.mat-focused[_ngcontent-%COMP%]   .mat-form-field-wrapper[_ngcontent-%COMP%]   .mat-form-field-flex[_ngcontent-%COMP%]{border-radius:15px!important;background-color:#bebebe72!important}.mat-form-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:18px;font-weight:700}.icon-display-delete[_ngcontent-%COMP%]{transform:scale(1.4)}.tooltip-font-size[_ngcontent-%COMP%]{font-size:1rem}"]}),r})();var N=p(4107),U=p(508);function Ge(r,s){if(1&r&&(e.TgZ(0,"div")(1,"div",2)(2,"span",29),e._uU(3),e.ALo(4,"titlecase"),e.qZA()()()),2&r){const t=e.oxw();e.xp6(3),e.hij("Fase ",e.lcZ(4,1,t.torneo.fase_actual),"")}}function Me(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"div",30)(1,"div",31)(2,"button",32),e.NdJ("click",function(){return e.CHM(t),e.oxw().editarTorneoDialogo()}),e._UZ(3,"mat-icon",33),e.TgZ(4,"span",34),e._uU(5,"Editar torneo"),e.qZA()(),e.TgZ(6,"button",32),e.NdJ("click",function(){return e.CHM(t),e.oxw().inscribirJugadorModal()}),e._UZ(7,"mat-icon",33),e.TgZ(8,"span",34),e._uU(9),e.ALo(10,"titlecase"),e.qZA()(),e.TgZ(11,"div",35)(12,"button",36),e._UZ(13,"mat-icon",37),e.qZA(),e.TgZ(14,"mat-menu",null,38)(16,"button",39),e.NdJ("click",function(){return e.CHM(t),e.oxw().editarTorneoDialogo()}),e._uU(17,"Editar torneo"),e.qZA(),e.TgZ(18,"button",39),e.NdJ("click",function(){return e.CHM(t),e.oxw().inscribirJugadorModal()}),e._uU(19),e.ALo(20,"titlecase"),e.qZA()()()()()}if(2&r){const t=e.MAs(15),o=e.oxw();e.xp6(2),e.Q6J("disabled",o.disableButtons)("color","primary"),e.xp6(1),e.Q6J("svgIcon","feather:edit"),e.xp6(3),e.Q6J("disabled",o.disableButtons)("color","primary"),e.xp6(1),e.Q6J("svgIcon","feather:user-plus"),e.xp6(2),e.hij("Inscribir ",e.lcZ(10,11,o.modalidadTorneo),""),e.xp6(3),e.Q6J("disabled",o.disableButtons)("matMenuTriggerFor",t),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:dots-vertical"),e.xp6(6),e.hij("Inscribir ",e.lcZ(20,13,o.modalidadTorneo),"")}}function Ye(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"div",40)(1,"button",41),e.NdJ("click",function(){return e.CHM(t),e.oxw().finalizarTorneo()}),e._UZ(2,"mat-icon",33),e.TgZ(3,"span",34),e._uU(4,"Fianlizar Torneo."),e.qZA()()()}2&r&&(e.xp6(2),e.Q6J("svgIcon","feather:refresh-cw"))}function ze(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"div",42)(1,"button",43),e.NdJ("click",function(){return e.CHM(t),e.oxw().crearGrupoDialogo()}),e._UZ(2,"mat-icon",33),e.TgZ(3,"span",34),e._uU(4,"Crear grupo"),e.qZA()(),e.TgZ(5,"div",35)(6,"button",44),e._UZ(7,"mat-icon",37),e.qZA(),e.TgZ(8,"mat-menu",null,45)(10,"button",39),e.NdJ("click",function(){return e.CHM(t),e.oxw().crearGrupoDialogo()}),e._uU(11,"Crear grupo"),e.qZA()()()()}if(2&r){const t=e.MAs(9);e.xp6(1),e.Q6J("color","primary"),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:plus-circle"),e.xp6(4),e.Q6J("matMenuTriggerFor",t),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:dots-vertical")}}function Be(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"mat-icon",55),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit;return e.oxw().removeGrupo(i)}),e.qZA()}2&r&&e.Q6J("svgIcon","feather:minus")}function Le(r,s){if(1&r&&(e.TgZ(0,"span",6),e._uU(1),e.qZA()),2&r){const t=e.oxw(2).$implicit;e.xp6(1),e.hij("",(null==t?null:t.ranking)||"",".")}}function $e(r,s){if(1&r&&(e.TgZ(0,"div",61),e.YNc(1,Le,2,1,"span",62),e._uU(2),e.qZA()),2&r){const t=e.oxw().$implicit,o=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==t?null:t.ranking),e.xp6(1),e.hij(" ",(null==t[o.modalidadTorneo]?null:t[o.modalidadTorneo].nombre)||(null==t[o.modalidadTorneo]?null:t[o.modalidadTorneo].id)," ")}}function He(r,s){if(1&r&&(e.TgZ(0,"div",63),e._uU(1),e.qZA()),2&r){const t=e.oxw().$implicit,o=e.oxw(2);e.xp6(1),e.AsE(" ",null==t[o.modalidadTorneo]?null:t[o.modalidadTorneo].jugador1.nombre," - ",null==t[o.modalidadTorneo]?null:t[o.modalidadTorneo].jugador2.nombre," ")}}function Ve(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"mat-icon",64),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit,a=e.oxw().$implicit;return e.oxw().removerJugador(i,a)}),e.qZA()}2&r&&e.Q6J("svgIcon","feather:x")}function Xe(r,s){1&r&&e._UZ(0,"div",65)}function We(r,s){if(1&r&&(e.TgZ(0,"div",56),e.YNc(1,$e,3,2,"div",57),e.YNc(2,He,2,2,"div",58),e.TgZ(3,"div"),e.YNc(4,Ve,1,1,"mat-icon",59),e.YNc(5,Xe,1,0,"div",60),e.qZA()()),2&r){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf","jugador"===t.modalidadTorneo),e.xp6(1),e.Q6J("ngIf","jugador"!==t.modalidadTorneo),e.xp6(2),e.Q6J("ngIf",t.showSorteo),e.xp6(1),e.Q6J("ngIf",!t.showSorteo)}}function Ke(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"mat-icon",66),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit;return e.oxw().addIntegranteGrupoDialog(i)}),e.qZA()}2&r&&e.Q6J("svgIcon","mat_outline:add")}function et(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"div",46)(1,"a",47),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw().seleccionarGrupoPartidos(a)}),e.TgZ(2,"div",48)(3,"div",49),e._uU(4),e.YNc(5,Be,1,1,"mat-icon",50),e.qZA()(),e.TgZ(6,"div",51),e.YNc(7,We,6,4,"div",52),e.qZA(),e.TgZ(8,"div",12)(9,"div",53),e.YNc(10,Ke,1,1,"mat-icon",54),e.qZA()()()()}if(2&r){const t=s.$implicit,o=e.oxw();e.xp6(4),e.hij(" Grupo ",t.nombre_grupo," "),e.xp6(1),e.Q6J("ngIf",o.showSorteo),e.xp6(2),e.Q6J("ngForOf",t.participantes),e.xp6(3),e.Q6J("ngIf",!o.showEnProceso)}}function tt(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"div",67)(1,"button",32),e.NdJ("click",function(){return e.CHM(t),e.oxw().cambiarTorneoAprogramacionDialog()}),e._UZ(2,"mat-icon",33),e.TgZ(3,"span",34),e._uU(4,"Programar partidos fase de grupos."),e.qZA()(),e.TgZ(5,"div",35)(6,"button",36),e._UZ(7,"mat-icon",37),e.qZA(),e.TgZ(8,"mat-menu",null,68)(10,"button",39),e.NdJ("click",function(){return e.CHM(t),e.oxw().cambiarTorneoAprogramacionDialog()}),e._uU(11,"Programar partidos fase de grupos."),e.qZA()()()()}if(2&r){const t=e.MAs(9),o=e.oxw();e.xp6(1),e.Q6J("disabled",o.disableButtons)("color","primary"),e.xp6(1),e.Q6J("svgIcon","feather:check"),e.xp6(4),e.Q6J("disabled",o.disableButtons)("matMenuTriggerFor",t),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:dots-vertical")}}function ot(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"div",69)(1,"button",41),e.NdJ("click",function(){return e.CHM(t),e.oxw().sortearSiguienteFaseTorneo()}),e._UZ(2,"mat-icon",33),e.TgZ(3,"span",34),e._uU(4,"Sortear siguiente fase."),e.qZA()()()}2&r&&(e.xp6(2),e.Q6J("svgIcon","feather:refresh-cw"))}function rt(r,s){1&r&&(e.TgZ(0,"th",87),e._uU(1," Jugador 1 "),e.qZA())}const Q=function(r){return{"bg-green-200 text-green-800 dark:bg-green-600 dark:text-green-50":r}};function it(r,s){if(1&r&&(e.TgZ(0,"td",88)(1,"span",89)(2,"span",90),e._uU(3),e.qZA()()()),2&r){const t=s.$implicit,o=e.oxw(2);e.xp6(1),e.Q6J("ngClass",e.VKq(2,Q,(null==t||null==t.resultado||null==t.resultado.ganador?null:t.resultado.ganador.id)===t[o.tipoJugador].id)),e.xp6(2),e.hij(" ",t[o.tipoJugador].nombre," ")}}function st(r,s){1&r&&(e.TgZ(0,"th",87),e._uU(1," Jugador 2 "),e.qZA())}function at(r,s){if(1&r&&(e.TgZ(0,"td",88)(1,"span",89)(2,"span",90),e._uU(3),e.qZA()()()),2&r){const t=s.$implicit,o=e.oxw(2);e.xp6(1),e.Q6J("ngClass",e.VKq(2,Q,(null==t||null==t.resultado||null==t.resultado.ganador?null:t.resultado.ganador.id)===t[o.tipoJugador2].id)),e.xp6(2),e.hij(" ",t[o.tipoJugador2].nombre," ")}}function nt(r,s){1&r&&(e.TgZ(0,"th",87),e._uU(1," Etapa "),e.qZA())}function lt(r,s){if(1&r&&(e.TgZ(0,"td",88)(1,"span",90),e._uU(2),e.ALo(3,"titlecase"),e.qZA()()),2&r){const t=e.oxw(2);e.xp6(2),e.hij(" ",e.lcZ(3,1,t.etapa)," ")}}function ct(r,s){1&r&&(e.TgZ(0,"th",87),e._uU(1," Acciones "),e.qZA())}function ut(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"div")(1,"mat-icon",92),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit;return e.oxw(2).editarPartido(i)}),e.qZA(),e._uU(2,"\xa0\xa0 "),e.qZA()}2&r&&(e.xp6(1),e.Q6J("svgIcon","feather:edit"))}function dt(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"div")(1,"mat-icon",92),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit;return e.oxw(2).editarPartido(i)}),e.qZA(),e._uU(2,"\xa0\xa0 "),e.qZA()}2&r&&(e.xp6(1),e.Q6J("svgIcon","feather:eye"))}function pt(r,s){if(1&r&&(e.TgZ(0,"td",91),e.YNc(1,ut,3,1,"div",7),e.YNc(2,dt,3,1,"div",7),e.qZA()),2&r){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.torneo.fase_actual===t.etapa&&"En Proceso"===t.torneo.estado),e.xp6(1),e.Q6J("ngIf",t.torneo.fase_actual!==t.etapa||"Finalizado"===t.torneo.estado)}}function ht(r,s){1&r&&e._UZ(0,"tr",93)}function ft(r,s){1&r&&e._UZ(0,"tr",94)}function mt(r,s){if(1&r&&(e.TgZ(0,"div",12)(1,"div",70)(2,"div",71),e._uU(3),e.qZA(),e.TgZ(4,"div",72),e._UZ(5,"input",73),e.qZA()(),e.TgZ(6,"div",74)(7,"div",75)(8,"div",76)(9,"table",77),e.ynx(10,78),e.YNc(11,rt,2,0,"th",79),e.YNc(12,it,4,4,"td",80),e.BQk(),e.ynx(13,81),e.YNc(14,st,2,0,"th",79),e.YNc(15,at,4,4,"td",80),e.BQk(),e.ynx(16,82),e.YNc(17,nt,2,0,"th",79),e.YNc(18,lt,4,3,"td",80),e.BQk(),e.ynx(19,83),e.YNc(20,ct,2,0,"th",79),e.YNc(21,pt,3,2,"td",84),e.BQk(),e.YNc(22,ht,1,0,"tr",85),e.YNc(23,ft,1,0,"tr",86),e.qZA()()()()()),2&r){const t=e.oxw();e.xp6(3),e.hij(" Partidos - Grupo ",t.grupoSeleccionado," "),e.xp6(2),e.Q6J("formControl",t.buscarJugador),e.xp6(4),e.Q6J("dataSource",t.tablaJugadoresData)("trackBy",t.trackByFn),e.xp6(13),e.Q6J("matHeaderRowDef",t.tablaJugadoresColumns),e.xp6(1),e.Q6J("matRowDefColumns",t.tablaJugadoresColumns)}}function gt(r,s){if(1&r&&(e.TgZ(0,"div",95),e._uU(1),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.Oqu(t.mensajePartidos)}}const _t=function(){return["/torneos"]},bt=function(){return{"=jugador":"jugadores inscritos.","=pareja":"parejas inscritas."}};let xt=(()=>{class r{constructor(t,o,i){this._changeDetectorRef=t,this._matDialog=o,this._torneoService=i,this._unsubscribeAll=new v.x,this.torneo={},this.cantGrupos=0,this.grupos=[],this.grupoSeleccionado="",this.tablaJugadoresData=new l.by([]),this.tablaJugadoresColumns=["JugadorU","jugadorD","etapa","acciones"],this.inscritos=[],this.partidos=[],this.modalidadTorneo="",this.faseGrupos=[],this.faseOctavos=[],this.faseCuartos=[],this.faseSemifinal=[],this.faseFinal=[],this.etapa="grupos",this.etapaControl=new c.NI({value:"",disabled:!1}),this.tipoJugador="",this.tipoJugador2="",this.buscarJugador=new c.NI({value:"",disabled:!1}),this.mensajePartidos="\xa1No hay partidos para mostrar!",this.disableButtons=!1,this.showTabla=!1,this.showInicial=!1,this.showSorteo=!1,this.showProgramacion=!1,this.showEnProceso=!1,this.showFinalizado=!1,this.Toast=h().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:a=>{a.addEventListener("mouseenter",h().stopTimer),a.addEventListener("mouseleave",h().resumeTimer)}})}ngOnInit(){this._torneoService.torneo$.pipe((0,n.R)(this._unsubscribeAll)).subscribe(t=>{this.torneo=t,this.cantGrupos=t.cantidad_grupos,this.determinarTorneo(),this.verificarDataPartidos(),this.mostrarBotones(),this._changeDetectorRef.markForCheck()}),this._torneoService.grupos$.pipe((0,n.R)(this._unsubscribeAll)).subscribe(t=>{this.grupos=t,this._changeDetectorRef.markForCheck()}),this._torneoService.inscritosTorneo$.pipe((0,n.R)(this._unsubscribeAll)).subscribe(t=>{this.inscritos=t,this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}determinarTorneo(){"singles"===this.torneo.modalidad?(this.tipoJugador="jugador1",this.tipoJugador2="jugador2",this.modalidadTorneo="jugador"):(this.tipoJugador="pareja1",this.tipoJugador2="pareja2",this.modalidadTorneo="pareja")}verificarDataPartidos(){("En Proceso"===this.torneo.estado||"Finalizado"===this.torneo.estado)&&(this.tablaJugadoresData=new l.by([]),this.faseOctavos=[],this.faseCuartos=[],this.faseSemifinal=[],this.faseFinal=[],this.obtenerPartidosTorneo(this.torneo.id,!0))}mostrarBotones(){switch(this.torneo.estado){case"Inicial":this.showInicial=!0;break;case"Sorteo":case"Programacion":this.showSorteo=!0,this.showProgramacion=!0;break;case"En Proceso":this.showEnProceso=!0,this.showSorteo=!1,this.showInicial=!1,this.showProgramacion=!1;break;case"Finalizado":this.showFinalizado=!0}this._changeDetectorRef.markForCheck()}editarTorneoDialogo(){this._matDialog.open(y,{data:{accion:"Editar",torneo:this.torneo}}).afterClosed().subscribe(o=>{void 0!==o&&this.editarTorneo(o)})}editarTorneo(t){this._torneoService.editarTorneo(this.torneo.id,t).pipe((0,n.R)(this._unsubscribeAll)).subscribe(o=>{this.Toast.fire({icon:"success",title:"Torneo editado con exito."}),this.actualizarDataTorneo()},o=>{this.Toast.fire({icon:"error",title:o.error.mensaje})})}actualizarDataTorneo(){this._torneoService.obtenerTorneoByIdRefresh(this.torneo.id).pipe((0,n.R)(this._unsubscribeAll)).subscribe(t=>{this._torneoService.torneo=t},t=>{this.Toast.fire({icon:"error",title:t.error.mensaje})})}verInscritosModal(){this._matDialog.open(S,{data:{accion:"Crear",inscritos:this.inscritos,tipojuego:this.modalidadTorneo,torneo:this.torneo}}).afterClosed().subscribe(o=>{})}inscribirJugadorModal(){this._matDialog.open(E,{data:{accion:"Crear",tipojuego:this.modalidadTorneo,torneo:this.torneo,inscritos:this.inscritos}}).afterClosed().subscribe(o=>{void 0!==o&&(this.disableButtons=!0,"singles"===this.torneo.modalidad?this.inscribirJugador(o,this.torneo.id):this.inscribirPareja(o,this.torneo.id))})}inscribirJugador(t,o){this._torneoService.inscribirJugador({jugador:t,torneo:o}).pipe((0,n.R)(this._unsubscribeAll)).subscribe(i=>{this.Toast.fire({icon:"success",title:"El jugador ha sido inscrito al torneo con exito."}),this.disableButtons=!1,this.obtenerInscritosTorneo(),this._changeDetectorRef.markForCheck()},i=>{this.disableButtons=!1,this.Toast.fire({icon:"error",title:i.error.mensaje})})}inscribirPareja(t,o){this._torneoService.inscribirPareja({pareja:t,torneo:o}).pipe((0,n.R)(this._unsubscribeAll)).subscribe(i=>{this.Toast.fire({icon:"success",title:"La pareja ha sido inscrita al torneo con exito."}),this.disableButtons=!1,this.obtenerInscritosTorneo(),this._changeDetectorRef.markForCheck()},i=>{this.disableButtons=!1,this.Toast.fire({icon:"error",title:i.error.mensaje})})}obtenerInscritosTorneo(){this._torneoService.obtenerInscritosTorneo(this.torneo.id).pipe((0,n.R)(this._unsubscribeAll)).subscribe(t=>{this._torneoService.inscritos=t},t=>{this.Toast.fire({icon:"error",title:t.error.mensaje})})}crearGrupoDialogo(){this.grupos.length!==this.cantGrupos?this._matDialog.open(F,{data:{accion:"Crear",cantGrupos:this.grupos.length,tipojuego:this.modalidadTorneo}}).afterClosed().subscribe(o=>{void 0!==o&&this.crearGrupo(o)}):this.Toast.fire({icon:"error",title:`La cantidad de grupos en el torneo ya esta en el limite definido: ${this.cantGrupos}`})}crearGrupo(t){this._torneoService.crearGrupo(t,this.torneo.id).pipe((0,n.R)(this._unsubscribeAll)).subscribe(o=>{this.Toast.fire({icon:"success",title:"Grupo creado con exito"}),this.actualizarGrupos()},o=>{this.Toast.fire({icon:"error",title:o.error.mensaje})})}actualizarGrupos(){this._torneoService.obtenerGruposRefresh(this.torneo.id).pipe((0,n.R)(this._unsubscribeAll)).subscribe(t=>{this._torneoService.grupos=t},t=>{this.Toast.fire({icon:"error",title:t.error.mensaje})})}removerJugador(t,o){this._matDialog.open(j,{data:{mensaje:"\xbfEst\xe1s seguro que quieres eliminar este jugador del grupo?"}}).afterClosed().subscribe(a=>{!0===a&&this._torneoService.removerParticipanteGrupo(this.torneo.id,o.id,t.id).pipe((0,n.R)(this._unsubscribeAll)).subscribe(u=>{this.Toast.fire({icon:"success",title:`El jugador ha sido eliminado del Grupo ${o.nombre_grupo}`}),this.actualizarGrupos()},u=>{this.Toast.fire({icon:"error",title:u.error.mensaje})})})}removeGrupo(t){this._matDialog.open(j,{data:{mensaje:"\xbfEst\xe1s seguro que quieres borrar este grupo?"}}).afterClosed().subscribe(i=>{!0===i&&this._torneoService.eliminarGrupo(this.torneo.id,t.id).pipe((0,n.R)(this._unsubscribeAll)).subscribe(a=>{this.Toast.fire({icon:"success",title:"El grupo ha sido eliminado con exito."}),this.actualizarGrupos()},a=>{this.Toast.fire({icon:"error",title:a.error.mensaje})})})}addIntegranteGrupoDialog(t){this._matDialog.open(F,{data:{accion:"Editar",grupo:t,cantGrupos:this.grupos.length,tipojuego:this.modalidadTorneo}}).afterClosed().subscribe(i=>{void 0!==i&&this.anadirIntegranteGrupo(t,i)})}anadirIntegranteGrupo(t,o){this._torneoService.agregarParticipanteGrupo(this.torneo.id,t.id,Object.assign({},o)).pipe((0,n.R)(this._unsubscribeAll)).subscribe(i=>{this.Toast.fire({icon:"success",title:"El jugador ha sido agregado con exito al grupo."}),this.actualizarGrupos()},i=>{this.Toast.fire({icon:"error",title:i.error.mensaje})})}seleccionarGrupoPartidos(t){"grupos"===this.etapaControl.value&&"regular"===this.torneo.tipo_torneo?(this.grupoSeleccionado=t.nombre_grupo,this.tablaJugadoresData=new l.by(this.faseGrupos[t.nombre_grupo]),this.showTabla=!0):"grupos"!==this.etapaControl.value?(this.etapaControl.setValue("grupos"),this.grupoSeleccionado=t.nombre_grupo,this.tablaJugadoresData=new l.by(this.faseGrupos[t.nombre_grupo]),this.showTabla=!0):(this.showTabla=!1,this.tablaJugadoresData=new l.by([])),this._changeDetectorRef.markForCheck()}cambiarTorneoAprogramacionDialog(){this.grupos.length?this._matDialog.open(j,{data:{mensaje:"\xbfEst\xe1s seguro que deseas programar la fase de grupos del torneo? Luego de esta accion no puedes volver a editar los grupos."}}).afterClosed().subscribe(o=>{!0===o&&("Programacion"===this.torneo.estado?this.programarPartidos():this.cambiarTorneoAProgramacion())}):this.Toast.fire({icon:"error",title:"No se puede programar partidos de la fase de grupos si no hay grupos."})}cambiarTorneoAProgramacion(){this._torneoService.cambiarTorneoAProgramacion(this.torneo.id).pipe((0,n.R)(this._unsubscribeAll)).subscribe(t=>{this.programarPartidos()},t=>{this.Toast.fire({icon:"error",title:t.error.mensaje})})}programarPartidos(){this._torneoService.programarPartidosFase(this.torneo.id).pipe((0,n.R)(this._unsubscribeAll)).subscribe(t=>{this.showProgramacion=!1,this.showSorteo=!1,this.Toast.fire({icon:"success",title:"Se ha sorteado con exito la fase de grupos."}),this.actualizarDataTorneo(),this._changeDetectorRef.markForCheck()},t=>{this.Toast.fire({icon:"error",title:t.error.mensaje})})}sortearSiguienteFaseTorneo(){this._torneoService.sortearSiguienteFase(this.torneo.id).pipe((0,n.R)(this._unsubscribeAll)).subscribe(t=>{this.Toast.fire({icon:"success",title:"Siguiente fase sorteada con exito"}),this.actualizarDataTorneo()},t=>{this.Toast.fire({icon:"error",title:t.error.mensaje})})}dialogFinalizarTorneo(t){this._matDialog.open(j,{data:{mensaje:"\xbfEst\xe1s seguro que quieres finalizar este torneo?"}}).afterClosed().subscribe(i=>{void 0!==i&&this.finalizarTorneo()})}finalizarTorneo(){this._torneoService.sortearSiguienteFase(this.torneo.id).pipe((0,n.R)(this._unsubscribeAll)).subscribe(t=>{this.Toast.fire({icon:"success",title:`Torneo Finalizado, Felicitaciones ${t.ganador} `}),this.actualizarDataTorneo()},t=>{this.Toast.fire({icon:"error",title:t.error.mensaje})})}etapaChange(t){switch(this.showTabla=!1,t){case"grupos":this.tablaJugadoresData=new l.by([]),this.mensajePartidos="Selecciona un grupo para ver los partidos.";break;case"octavos":0===this.faseOctavos.length?this.mensajePartidos="No hay partidos para esta fase.":(this.tablaJugadoresData=new l.by(this.faseOctavos),this.showTabla=!0);break;case"cuartos":0===this.faseCuartos.length?this.mensajePartidos="No hay partidos para esta fase.":(this.tablaJugadoresData=new l.by(this.faseCuartos),this.showTabla=!0);break;case"semifinales":0===this.faseSemifinal.length?this.mensajePartidos="No hay partidos para esta fase.":(this.tablaJugadoresData=new l.by(this.faseSemifinal),this.showTabla=!0);break;case"final":0===this.faseFinal.length?this.mensajePartidos="No hay partidos para esta fase.":(this.tablaJugadoresData=new l.by(this.faseFinal),this.showTabla=!0)}this.etapa=t}obtenerPartidosTorneo(t,o){this._torneoService.obtenerPartidosTorneo(t).pipe((0,n.R)(this._unsubscribeAll)).subscribe(i=>{this.partidos=i,this.ordenarPartidosFaseGrupos(o),this._changeDetectorRef.markForCheck()},i=>{this.Toast.fire({icon:"error",title:i.error.mensaje})})}ordenarPartidosFaseGrupos(t,o=""){let i={};this.grupos.forEach(a=>{i[a.nombre_grupo]=[]}),this.partidos.forEach(a=>{"grupos"===a.fase&&i[a.grupo.nombre_grupo].push(a),"octavos"===a.fase&&this.faseOctavos.push(a),"cuartos"===a.fase&&this.faseCuartos.push(a),"semifinales"===a.fase&&this.faseSemifinal.push(a),"final"===a.fase&&this.faseFinal.push(a)}),this.faseGrupos=i,this.etapaControl.enable(),this.etapaControl.setValue(this.torneo.fase_actual),""!==this.grupoSeleccionado&&"grupos"===this.torneo.fase_actual&&(this.tablaJugadoresData=new l.by(this.faseGrupos[this.grupoSeleccionado]),this._changeDetectorRef.markForCheck()),t&&"grupos"!==this.torneo.fase_actual&&this.etapaChange(this.torneo.fase_actual),"grupos"===this.torneo.fase_actual&&(this.mensajePartidos="Selecciona un grupo para ver los partidos."),this._changeDetectorRef.markForCheck()}editarPartido(t){this._matDialog.open(P,{data:{sets:this.torneo.configuracion_sets[this.etapa],partido:t,etapa:this.etapa,modalidad:this.torneo.modalidad,tipoJugador1:this.tipoJugador,tipoJugador2:this.tipoJugador2,faseActual:this.torneo.fase_actual,estado:this.torneo.estado}}).afterClosed().subscribe(i=>{void 0!==i&&this.actualizarResultado(t.id,i,t.fase)})}actualizarResultado(t,o,i){this._torneoService.actualizarPartido(t,o).pipe((0,n.R)(this._unsubscribeAll)).subscribe(a=>{this.Toast.fire({icon:"success",title:"Partido actualizado con exito"}),this.verificarDataPartidos(),this._changeDetectorRef.markForCheck()},a=>{this.Toast.fire({icon:"error",title:a.error.mensaje})})}trackByFn(t,o){return o.id||t}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(e.sBO),e.Y36(g.uw),e.Y36(_))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-torneo-regular"]],decls:50,vars:22,consts:[[1,"flex","flex-wrap","w-full","max-w-screen-xl","mx-auto","p-6","md:p-8"],[1,"flex","items-center","justify-between","w-full"],[1,"text-3xl","font-semibold","tracking-tight","leading-8"],[1,"text-naranmi",3,"routerLink"],[1,"icon-size-6","text-black",3,"svgIcon"],[1,"text-xl","font-semibold","tracking-tight","leading-8","cursor-pointer",3,"click"],[1,"text-naranmi"],[4,"ngIf"],["class","flex items-center justify-end w-full",4,"ngIf"],["class","w-full flex justify-end items-center mt-5",4,"ngIf"],[1,"mt-10"],["class","flex items-center ml-6",4,"ngIf"],[1,"w-full"],[1,"relative","flex","items-center","justify-center","w-full","dark:text-gray-50"],[1,"flex","items-center","justify-start","w-full","h-full","gap-6","py-4","mx-auto","overflow-auto"],["class","relative flex w-full sm:w-auto h-full",4,"ngFor","ngForOf","ngForTrackBy"],[1,"w-full","mt-4"],["class","mt-2 flex justify-end w-full",4,"ngIf"],[1,"w-full","mt-4","mb-4"],[1,"grid","grid-cols-1","sm:grid-cols-2","gap-3"],["id","fasetorneo","required","",3,"formControl","placeholder","selectionChange"],["value","grupos"],["value","octavos"],["value","cuartos"],["value","semifinales"],["value","final"],["class","w-full flex justify-end items-center",4,"ngIf"],["class","w-full",4,"ngIf","ngIfElse"],["elseNoPartidos",""],[1,"p-2.5","bg-slate-500","rounded-full","text-white","text-2xl","font-bold"],[1,"flex","items-center","justify-end","w-full"],[1,"flex","items-center","ml-6","gap-2"],["mat-flat-button","",1,"hidden","sm:inline-flex","text-white","font-bold","text-lg",3,"disabled","color","click"],[1,"icon-size-5",3,"svgIcon"],[1,"ml-2"],[1,"sm:hidden"],["mat-icon-button","",3,"disabled","matMenuTriggerFor"],[3,"svgIcon"],["actionsMenu","matMenu"],["mat-menu-item","",3,"click"],[1,"w-full","flex","justify-end","items-center","mt-5"],["mat-flat-button","",1,"inline-flex","text-white","font-bold","text-lg","bg-naranmi",3,"click"],[1,"flex","items-center","ml-6"],["mat-flat-button","",1,"hidden","sm:inline-flex","text-white","font-bold","text-lg",3,"color","click"],["mat-icon-button","",3,"matMenuTriggerFor"],["actionGrupos","matMenu"],[1,"relative","flex","w-full","sm:w-auto","h-full"],[1,"w-56","p-3","rounded-lg","shadow","hover:shadow-xl","transition-shadow","duration-150","ease-in-out","bg-card",3,"click"],[1,"w-full","border-b-2","border-chiliRed","cursor-pointer"],[1,"font-bold","text-lg","text-center"],["class","text-chiliRed font-bold icon-display cursor-pointer float-right",3,"svgIcon","click",4,"ngIf"],[1,"w-full","mt-4","cursor-pointer"],["class","flex flex-row justify-between",4,"ngFor","ngForOf"],[1,"flex","justify-end","mt-4","text-md","font-md"],["class","text-verdemi font-bold icon-display cursor-pointer",3,"svgIcon","click",4,"ngIf"],[1,"text-chiliRed","font-bold","icon-display","cursor-pointer","float-right",3,"svgIcon","click"],[1,"flex","flex-row","justify-between"],["class","font-semibold text-base",4,"ngIf"],["class","font-semibold text-base mb-2",4,"ngIf"],["class","text-chiliRed font-bold icon-display-delete cursor-pointer",3,"svgIcon","click",4,"ngIf"],["class","mb-7",4,"ngIf"],[1,"font-semibold","text-base"],["class","text-naranmi",4,"ngIf"],[1,"font-semibold","text-base","mb-2"],[1,"text-chiliRed","font-bold","icon-display-delete","cursor-pointer",3,"svgIcon","click"],[1,"mb-7"],[1,"text-verdemi","font-bold","icon-display","cursor-pointer",3,"svgIcon","click"],[1,"mt-2","flex","justify-end","w-full"],["actionsFase","matMenu"],[1,"w-full","flex","justify-end","items-center"],[1,"grid","grid-cols-1","sm:grid-cols-2"],[1,"font-semibold","text-xl","flex","items-center"],[1,"w-full","form-buscar-jugador"],["matInput","","type","text","placeholder","Buscar jugador",3,"formControl"],[1,"grid","grid-cols-1","xl:grid-cols-1","gap-8","w-full","mt-8"],[1,"xl:col-span-2","flex","flex-col","flex-auto","bg-card","shadow","rounded-xl","overflow-hidden"],[1,"overflow-x-auto","mx-6"],["mat-table","",1,"w-full","bg-transparent",3,"dataSource","trackBy"],["matColumnDef","JugadorU"],["mat-header-cell","","class","text-black text-lg",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","jugadorD"],["matColumnDef","etapa"],["matColumnDef","acciones"],["class","text-center","mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["class","order-row h-16","mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","",1,"text-black","text-lg"],["mat-cell",""],[1,"inline-flex","items-center","font-bold","text-xs","px-2.5","py-0.5","rounded-full","tracking-wide","uppercase",3,"ngClass"],[1,"pr-6","font-semibold","text-base","whitespace-nowrap"],["mat-cell","",1,"text-center"],[1,"icon-size-5","cursor-pointer","text-naranmi","hover:opacity-60",3,"svgIcon","click"],["mat-header-row",""],["mat-row","",1,"order-row","h-16"],[1,"p-8","sm:p-16","border-t","text-4xl","font-semibold","tracking-tight","text-center","w-full"]],template:function(t,o){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div")(3,"div",2)(4,"a",3),e._UZ(5,"mat-icon",4),e._uU(6," Torneos"),e.qZA(),e._uU(7),e.qZA(),e.TgZ(8,"div",5),e.NdJ("click",function(){return o.verInscritosModal()}),e._uU(9," Hay "),e.TgZ(10,"span",6),e._uU(11),e.qZA(),e._uU(12),e.ALo(13,"i18nPlural"),e.qZA()(),e.YNc(14,Ge,5,3,"div",7),e.qZA(),e.YNc(15,Me,21,15,"div",8),e.YNc(16,Ye,5,1,"div",9),e.TgZ(17,"div",10)(18,"div",1)(19,"div")(20,"div",2),e._uU(21,"Grupos"),e.qZA()(),e.YNc(22,ze,12,4,"div",11),e.qZA()(),e._UZ(23,"div",12),e.TgZ(24,"div",13)(25,"div",14),e.YNc(26,et,11,4,"div",15),e.qZA()(),e._UZ(27,"div",16),e.YNc(28,tt,12,6,"div",17),e._UZ(29,"div",16),e.TgZ(30,"div",18)(31,"div",19)(32,"mat-form-field",12)(33,"mat-label"),e._uU(34,"Elegir fase torneo "),e.qZA(),e.TgZ(35,"mat-select",20),e.NdJ("selectionChange",function(a){return o.etapaChange(a.value)}),e.TgZ(36,"mat-option",21),e._uU(37,"Fase de grupos"),e.qZA(),e.TgZ(38,"mat-option",22),e._uU(39,"Octavos de final"),e.qZA(),e.TgZ(40,"mat-option",23),e._uU(41,"Cuartos de final"),e.qZA(),e.TgZ(42,"mat-option",24),e._uU(43,"Semifinales"),e.qZA(),e.TgZ(44,"mat-option",25),e._uU(45,"Final"),e.qZA()()(),e.YNc(46,ot,5,1,"div",26),e.qZA()(),e.YNc(47,mt,24,6,"div",27),e.YNc(48,gt,2,1,"ng-template",null,28,e.W1O),e.qZA()),2&t){const i=e.MAs(49);e.xp6(4),e.Q6J("routerLink",e.DdM(20,_t)),e.xp6(1),e.Q6J("svgIcon","mat_outline:arrow_back_ios"),e.xp6(2),e.hij(" / ",o.torneo.nombre," "),e.xp6(4),e.Oqu(o.inscritos.length),e.xp6(1),e.hij(" ",e.xi3(13,17,o.modalidadTorneo,e.DdM(21,bt))," "),e.xp6(2),e.Q6J("ngIf","En Proceso"===o.torneo.estado),e.xp6(1),e.Q6J("ngIf",o.showInicial),e.xp6(1),e.Q6J("ngIf",o.showEnProceso&&"final"===o.torneo.fase_actual),e.xp6(6),e.Q6J("ngIf",o.showSorteo),e.xp6(4),e.Q6J("ngForOf",o.grupos)("ngForTrackBy",o.trackByFn),e.xp6(2),e.Q6J("ngIf",o.showProgramacion),e.xp6(7),e.Q6J("formControl",o.etapaControl)("placeholder","Fase torneo"),e.xp6(11),e.Q6J("ngIf",o.showEnProceso&&"final"!==o.torneo.fase_actual),e.xp6(1),e.Q6J("ngIf",o.showTabla)("ngIfElse",i)}},directives:[k.yS,J.Hw,d.O5,w.lW,Z.p6,Z.VK,Z.OP,d.sg,x.KE,x.hX,N.gD,c.Q7,c.JJ,c.oH,U.ey,A.Nt,c.Fj,l.BZ,l.w1,l.fO,l.ge,l.Dz,l.ev,d.mk,l.as,l.XQ,l.nj,l.Gk],pipes:[d.Gx,d.rS],styles:["::-webkit-scrollbar{height:10px}::-webkit-scrollbar-track{background:#f1f1f1}::-webkit-scrollbar-thumb{background:#888;border-radius:5px}::-webkit-scrollbar-thumb:hover{background:#555}.icon-display{transform:scale(1.4);float:right!important}.icon-display-delete{transform:scale(1)}.form-buscar-jugador{padding:6px;border-radius:5px;background-color:#fff;font-weight:bolder}.form-buscar-jugador:active{border:1px solid #FFD484}table{width:100%}th{border-bottom:2px solid #E33022!important}.mat-form-field.mat-form-field-appearance-fill .mat-form-field-wrapper .mat-form-field-flex,.mat-form-field.mat-form-field-appearance-fill.mat-focused .mat-form-field-wrapper .mat-form-field-flex{border-radius:15px!important;background-color:#bebebe72!important}mat-select{font-size:18px;font-weight:700}\n"],encapsulation:2}),r})();function vt(r,s){if(1&r&&(e.TgZ(0,"div",31)(1,"div",3)(2,"span",32),e._uU(3),e.ALo(4,"titlecase"),e.qZA()()()),2&r){const t=e.oxw();e.xp6(3),e.hij("Fase ",e.lcZ(4,1,t.torneo.fase_actual),"")}}function Tt(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"div",33)(1,"div",34)(2,"button",35),e.NdJ("click",function(){return e.CHM(t),e.oxw().editarTorneoDialogo()}),e._UZ(3,"mat-icon",36),e.TgZ(4,"span",37),e._uU(5,"Editar torneo"),e.qZA()(),e.TgZ(6,"button",35),e.NdJ("click",function(){return e.CHM(t),e.oxw().inscribirJugadorModal()}),e._UZ(7,"mat-icon",36),e.TgZ(8,"span",37),e._uU(9),e.ALo(10,"titlecase"),e.qZA()(),e.TgZ(11,"div",38)(12,"button",39),e._UZ(13,"mat-icon",40),e.qZA(),e.TgZ(14,"mat-menu",null,41)(16,"button",42),e.NdJ("click",function(){return e.CHM(t),e.oxw().editarTorneoDialogo()}),e._uU(17,"Editar torneo"),e.qZA(),e.TgZ(18,"button",42),e.NdJ("click",function(){return e.CHM(t),e.oxw().inscribirJugadorModal()}),e._uU(19),e.ALo(20,"titlecase"),e.qZA()()()()()}if(2&r){const t=e.MAs(15),o=e.oxw();e.xp6(2),e.Q6J("disabled",o.disableButtons)("color","primary"),e.xp6(1),e.Q6J("svgIcon","feather:edit"),e.xp6(3),e.Q6J("disabled",o.disableButtons)("color","primary"),e.xp6(1),e.Q6J("svgIcon","feather:user-plus"),e.xp6(2),e.hij("Inscribir ",e.lcZ(10,11,o.modalidadTorneo),""),e.xp6(3),e.Q6J("disabled",o.disableButtons)("matMenuTriggerFor",t),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:dots-vertical"),e.xp6(6),e.hij("Inscribir ",e.lcZ(20,13,o.modalidadTorneo),"")}}function Ct(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"div",43)(1,"button",44),e.NdJ("click",function(){return e.CHM(t),e.oxw().finalizarTorneo()}),e._UZ(2,"mat-icon",36),e.TgZ(3,"span",37),e._uU(4,"Finalizar Torneo."),e.qZA()()()}2&r&&(e.xp6(2),e.Q6J("svgIcon","feather:stop-circle"))}function wt(r,s){if(1&r&&(e.TgZ(0,"span",7),e._uU(1),e.qZA()),2&r){const t=e.oxw(2).$implicit;e.xp6(1),e.hij("",(null==t?null:t.ranking)||"",".")}}function jt(r,s){if(1&r&&(e.TgZ(0,"div",56),e.YNc(1,wt,2,1,"span",57),e._uU(2),e.qZA()),2&r){const t=e.oxw().$implicit,o=e.oxw(2);e.xp6(1),e.Q6J("ngIf",null==t?null:t.ranking),e.xp6(1),e.hij(" ",(null==t[o.modalidadTorneo]?null:t[o.modalidadTorneo].nombre)||(null==t[o.modalidadTorneo]?null:t[o.modalidadTorneo].id)," ")}}function Zt(r,s){if(1&r&&(e.TgZ(0,"div",58),e._uU(1),e.qZA()),2&r){const t=e.oxw().$implicit,o=e.oxw(2);e.xp6(1),e.AsE(" ",null==t[o.modalidadTorneo]?null:t[o.modalidadTorneo].jugador1.nombre," - ",null==t[o.modalidadTorneo]?null:t[o.modalidadTorneo].jugador2.nombre," ")}}function Jt(r,s){if(1&r&&(e.TgZ(0,"div",52),e.YNc(1,jt,3,2,"div",53),e.YNc(2,Zt,2,2,"div",54),e.TgZ(3,"div"),e._UZ(4,"div",55),e.qZA()()),2&r){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf","jugador"===t.modalidadTorneo),e.xp6(1),e.Q6J("ngIf","jugador"!==t.modalidadTorneo)}}function kt(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"div",45)(1,"a",46),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw().seleccionarGrupoPartidos(a.nombre_grupo)}),e.TgZ(2,"div",47)(3,"div",48),e._uU(4),e.qZA()(),e.TgZ(5,"div",49),e.YNc(6,Jt,5,2,"div",50),e.qZA(),e.TgZ(7,"div",13),e._UZ(8,"div",51),e.qZA()()()}if(2&r){const t=s.$implicit;e.xp6(4),e.hij(" Grupo ",t.nombre_grupo," "),e.xp6(2),e.Q6J("ngForOf",t.participantes)}}function At(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"div",59)(1,"button",44),e.NdJ("click",function(){return e.CHM(t),e.oxw().sortearSiguienteFaseTorneo()}),e._UZ(2,"mat-icon",36),e.TgZ(3,"span",37),e._uU(4,"Sortear siguiente fase."),e.qZA()()()}2&r&&(e.xp6(2),e.Q6J("svgIcon","feather:refresh-cw"))}function It(r,s){if(1&r&&(e.TgZ(0,"mat-option",62),e._uU(1),e.ALo(2,"titlecase"),e.qZA()),2&r){const t=s.$implicit,o=s.index;e.Q6J("value",t.id),e.xp6(1),e.lnq("",o+1,". ",e.lcZ(2,4,t.tipo)," - ",t.retadores,"")}}function Rt(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"mat-form-field",13)(1,"mat-label"),e._uU(2,"Elegir jornada"),e.qZA(),e.TgZ(3,"mat-select",60),e.NdJ("selectionChange",function(i){return e.CHM(t),e.oxw().jornadaChange(i.value,i.source.triggerValue)}),e.YNc(4,It,3,6,"mat-option",61),e.qZA()()}if(2&r){const t=e.oxw();e.xp6(3),e.Q6J("formControl",t.jornadaControl)("placeholder","Jornada"),e.xp6(1),e.Q6J("ngForOf",t.jornadas)}}function yt(r,s){1&r&&e._UZ(0,"div")}function Ft(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"div",59)(1,"button",44),e.NdJ("click",function(){return e.CHM(t),e.oxw().programarPartidosJornada()}),e._UZ(2,"mat-icon",36),e.TgZ(3,"span",37),e._uU(4,"Programar partidos jornada."),e.qZA()()()}2&r&&(e.xp6(2),e.Q6J("svgIcon","feather:arrow-right-circle"))}function Pt(r,s){1&r&&(e.TgZ(0,"th",80),e._uU(1," Retador "),e.qZA())}const G=function(r){return{"bg-green-200 text-green-800 dark:bg-green-600 dark:text-green-50":r}};function Dt(r,s){if(1&r&&(e.TgZ(0,"td",81)(1,"span",82)(2,"span",83),e._uU(3),e.qZA()()()),2&r){const t=s.$implicit,o=e.oxw(2);e.xp6(1),e.Q6J("ngClass",e.VKq(2,G,(null==t||null==t.resultado||null==t.resultado.ganador?null:t.resultado.ganador.id)===t[o.tipoJugador].id)),e.xp6(2),e.hij(" ",t[o.tipoJugador].nombre," ")}}function Et(r,s){1&r&&(e.TgZ(0,"th",80),e._uU(1," Retado "),e.qZA())}function St(r,s){if(1&r&&(e.TgZ(0,"td",81)(1,"span",82)(2,"span",83),e._uU(3),e.qZA()()()),2&r){const t=s.$implicit,o=e.oxw(2);e.xp6(1),e.Q6J("ngClass",e.VKq(2,G,(null==t||null==t.resultado||null==t.resultado.ganador?null:t.resultado.ganador.id)===t[o.tipoJugador2].id)),e.xp6(2),e.hij(" ",t[o.tipoJugador2].nombre," ")}}function qt(r,s){1&r&&(e.TgZ(0,"th",80),e._uU(1," Etapa "),e.qZA())}function Ot(r,s){if(1&r&&(e.TgZ(0,"td",81)(1,"span",83),e._uU(2),e.ALo(3,"titlecase"),e.qZA()()),2&r){const t=e.oxw(2);e.xp6(2),e.hij(" ",e.lcZ(3,1,t.etapa)," ")}}function Nt(r,s){1&r&&(e.TgZ(0,"th",80),e._uU(1," Acciones "),e.qZA())}function Ut(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"div")(1,"mat-icon",85),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit;return e.oxw(2).editarPartido(i)}),e.qZA(),e._uU(2,"\xa0\xa0 "),e.qZA()}2&r&&(e.xp6(1),e.Q6J("svgIcon","feather:edit"))}function Qt(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"div")(1,"mat-icon",85),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit;return e.oxw(2).editarPartido(i)}),e.qZA(),e._uU(2,"\xa0\xa0 "),e.qZA()}2&r&&(e.xp6(1),e.Q6J("svgIcon","feather:eye"))}function Gt(r,s){if(1&r&&(e.TgZ(0,"td",84),e.YNc(1,Ut,3,1,"div",28),e.YNc(2,Qt,3,1,"div",28),e.qZA()),2&r){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.torneo.fase_actual===t.etapa&&"En Proceso"===t.torneo.estado),e.xp6(1),e.Q6J("ngIf",t.torneo.fase_actual!==t.etapa||"Finalizado"===t.torneo.estado)}}function Mt(r,s){1&r&&e._UZ(0,"tr",86)}function Yt(r,s){1&r&&e._UZ(0,"tr",87)}function zt(r,s){if(1&r&&(e.TgZ(0,"div",13)(1,"div",63)(2,"div",64),e._uU(3),e.qZA(),e.TgZ(4,"div",65),e._UZ(5,"input",66),e.qZA()(),e.TgZ(6,"div",67)(7,"div",68)(8,"div",69)(9,"table",70),e.ynx(10,71),e.YNc(11,Pt,2,0,"th",72),e.YNc(12,Dt,4,4,"td",73),e.BQk(),e.ynx(13,74),e.YNc(14,Et,2,0,"th",72),e.YNc(15,St,4,4,"td",73),e.BQk(),e.ynx(16,75),e.YNc(17,qt,2,0,"th",72),e.YNc(18,Ot,4,3,"td",73),e.BQk(),e.ynx(19,76),e.YNc(20,Nt,2,0,"th",72),e.YNc(21,Gt,3,2,"td",77),e.BQk(),e.YNc(22,Mt,1,0,"tr",78),e.YNc(23,Yt,1,0,"tr",79),e.qZA()()()()()),2&r){const t=e.oxw();e.xp6(3),e.hij(" Partidos - Grupo ",t.grupoSeleccionado," "),e.xp6(2),e.Q6J("formControl",t.buscarJugador),e.xp6(4),e.Q6J("dataSource",t.tablaJugadoresData)("trackBy",t.trackByFn),e.xp6(13),e.Q6J("matHeaderRowDef",t.tablaJugadoresColumns),e.xp6(1),e.Q6J("matRowDefColumns",t.tablaJugadoresColumns)}}function Bt(r,s){if(1&r&&(e.TgZ(0,"div",88),e._uU(1),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.Oqu(t.mensajePartidos)}}const Lt=function(){return["/torneos"]},$t=function(){return{"=jugador":"jugadores inscritos.","=pareja":"parejas inscritas."}};let Ht=(()=>{class r{constructor(t,o,i){this._changeDetectorRef=t,this._matDialog=o,this._torneoService=i,this._unsubscribeAll=new v.x,this.torneo={},this.cantGrupos=0,this.grupos=[],this.grupoSeleccionado="",this.tablaJugadoresData=new l.by([]),this.tablaJugadoresColumns=["JugadorU","jugadorD","etapa","acciones"],this.inscritos=[],this.partidos=[],this.modalidadTorneo="",this.faseGrupos=[],this.faseOctavos=[],this.faseCuartos=[],this.faseSemifinal=[],this.faseFinal=[],this.etapa="grupos",this.etapaControl=new c.NI({value:"",disabled:!1}),this.tipoJugador="",this.tipoJugador2="",this.buscarJugador=new c.NI({value:"",disabled:!1}),this.mensajePartidos="\xa1No hay partidos para mostrar!",this.disableButtons=!1,this.jornadas=[],this.jornadaControl=new c.NI({value:"",disabled:!0}),this.tipoJornada="",this.showTabla=!1,this.showInicial=!1,this.showSorteo=!1,this.showProgramacion=!1,this.showEnProceso=!1,this.showFinalizado=!1,this.partidosJornadas={},this.Toast=h().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:a=>{a.addEventListener("mouseenter",h().stopTimer),a.addEventListener("mouseleave",h().resumeTimer)}})}ngOnInit(){this._torneoService.torneo$.pipe((0,n.R)(this._unsubscribeAll)).subscribe(t=>{this.torneo=t,this.cantGrupos=t.cantidad_grupos,this.determinarTorneo(),this.verificarDataPartidos(),this.mostrarBotones(),this._changeDetectorRef.markForCheck()}),this._torneoService.grupos$.pipe((0,n.R)(this._unsubscribeAll)).subscribe(t=>{this.grupos=t,this._changeDetectorRef.markForCheck()}),this._torneoService.inscritosTorneo$.pipe((0,n.R)(this._unsubscribeAll)).subscribe(t=>{this.inscritos=t,this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}determinarTorneo(){"singles"===this.torneo.modalidad?(this.tipoJugador="jugador1",this.tipoJugador2="jugador2",this.modalidadTorneo="jugador"):(this.tipoJugador="pareja1",this.tipoJugador2="pareja2",this.modalidadTorneo="pareja")}verificarDataPartidos(){("En Proceso"===this.torneo.estado||"Finalizado"===this.torneo.estado)&&this.obtenerJornadasPorTorneo()}mostrarBotones(){switch(this.torneo.estado){case"Inicial":this.showInicial=!0;break;case"Sorteo":this.showSorteo=!0,this.showProgramacion=!0;break;case"Programacion":this.showProgramacion=!0;break;case"En Proceso":this.showEnProceso=!0;break;case"Finalizado":this.showFinalizado=!0}}editarTorneoDialogo(){this._matDialog.open(y,{data:{accion:"Editar",torneo:this.torneo}}).afterClosed().subscribe(o=>{void 0!==o&&this.editarTorneo(o)})}editarTorneo(t){this._torneoService.editarTorneo(this.torneo.id,t).pipe((0,n.R)(this._unsubscribeAll)).subscribe(o=>{this.Toast.fire({icon:"success",title:"Torneo editado con exito."}),this.actualizarDataTorneo()},o=>{this.Toast.fire({icon:"error",title:o.error.mensaje})})}actualizarDataTorneo(){this._torneoService.obtenerTorneoByIdRefresh(this.torneo.id).pipe((0,n.R)(this._unsubscribeAll)).subscribe(t=>{this._torneoService.torneo=t},t=>{this.Toast.fire({icon:"error",title:t.error.mensaje})})}obtenerGruposRefresh(){this._torneoService.obtenerGruposRefresh(this.torneo.id).pipe((0,n.R)(this._unsubscribeAll)).subscribe(t=>{this._torneoService.grupos=t,this._changeDetectorRef.markForCheck()},t=>{this.Toast.fire({icon:"error",title:t.error.mensaje})})}verInscritosModal(){this._matDialog.open(S,{data:{accion:"Crear",inscritos:this.inscritos,tipojuego:this.modalidadTorneo,torneo:this.torneo}}).afterClosed().subscribe(o=>{})}inscribirJugadorModal(){this._matDialog.open(E,{data:{accion:"Crear",tipojuego:this.modalidadTorneo,torneo:this.torneo,inscritos:this.inscritos}}).afterClosed().subscribe(o=>{void 0!==o&&(this.disableButtons=!0,"singles"===this.torneo.modalidad?this.inscribirJugador(o,this.torneo.id):this.inscribirPareja(o,this.torneo.id))})}inscribirJugador(t,o){this._torneoService.inscribirJugador({jugador:t,torneo:o}).pipe((0,n.R)(this._unsubscribeAll)).subscribe(i=>{this.Toast.fire({icon:"success",title:"El jugador ha sido inscrito al torneo con exito."}),this.disableButtons=!1,this.obtenerInscritosTorneo(),this._changeDetectorRef.markForCheck()},i=>{this.disableButtons=!1,this.Toast.fire({icon:"error",title:i.error.mensaje})})}inscribirPareja(t,o){this._torneoService.inscribirPareja({pareja:t,torneo:o}).pipe((0,n.R)(this._unsubscribeAll)).subscribe(i=>{this.Toast.fire({icon:"success",title:"La pareja ha sido inscrita al torneo con exito."}),this.disableButtons=!1,this.obtenerInscritosTorneo(),this._changeDetectorRef.markForCheck()},i=>{this.disableButtons=!1,this.Toast.fire({icon:"error",title:i.error.mensaje})})}obtenerInscritosTorneo(){this._torneoService.obtenerInscritosTorneo(this.torneo.id).pipe((0,n.R)(this._unsubscribeAll)).subscribe(t=>{this._torneoService.inscritos=t},t=>{this.Toast.fire({icon:"error",title:t.error.mensaje})})}etapaChange(t){switch(this.showTabla=!1,t){case"grupos":this.tablaJugadoresData=new l.by([]),this.mensajePartidos="Selecciona un grupo para ver los partidos.";break;case"octavos":0===this.faseOctavos.length?this.mensajePartidos="No hay partidos para esta fase.":(this.tablaJugadoresData=new l.by(this.faseOctavos),this.showTabla=!0);break;case"cuartos":0===this.faseCuartos.length?this.mensajePartidos="No hay partidos para esta fase.":(this.tablaJugadoresData=new l.by(this.faseCuartos),this.showTabla=!0);break;case"semifinales":0===this.faseSemifinal.length?this.mensajePartidos="No hay partidos para esta fase.":(this.tablaJugadoresData=new l.by(this.faseSemifinal),this.showTabla=!0);break;case"final":0===this.faseFinal.length?this.mensajePartidos="No hay partidos para esta fase.":(this.tablaJugadoresData=new l.by(this.faseFinal),this.showTabla=!0)}this.etapa=t}obtenerPartidosTorneo(t,o){this._torneoService.obtenerPartidosTorneo(t).pipe((0,n.R)(this._unsubscribeAll)).subscribe(i=>{this.partidos=i,this.tablaJugadoresData=new l.by([]),this.faseGrupos=[],this.partidosJornadas={},this.faseOctavos=[],this.faseCuartos=[],this.faseSemifinal=[],this.faseFinal=[],o?this.ordenarPartidosActualizarPartido():this.ordenarPartidosEscalera(),this._changeDetectorRef.markForCheck()},i=>{this.Toast.fire({icon:"error",title:i.error.mensaje})})}ordenarPartidosActualizarPartido(){let t={};this.grupos.forEach(o=>{t[o.nombre_grupo]=[]}),this.partidos.forEach(o=>{var i;"grupos"===o.fase&&(null===(i=null==o?void 0:o.grupo)||void 0===i?void 0:i.id)&&t[o.grupo.nombre_grupo].push(o),"octavos"===o.fase&&this.faseOctavos.push(o),"cuartos"===o.fase&&this.faseCuartos.push(o),"semifinales"===o.fase&&this.faseSemifinal.push(o),"final"===o.fase&&this.faseFinal.push(o)}),this.faseGrupos=t,this.ordenarJornadas(),"grupos"===this.etapaControl.value?"Cruzada"===this.tipoJornada?(this.showTabla=!0,this.tablaJugadoresData=new l.by(this.partidosJornadas[this.jornadaControl.value])):this.seleccionarGrupoPartidos(this.grupoSeleccionado):(this.etapaControl.setValue(this.torneo.fase_actual),this.etapaChange(this.etapaControl.value))}editarPartido(t){this._matDialog.open(P,{data:{sets:this.torneo.configuracion_sets[this.etapa],partido:t,etapa:this.etapa,modalidad:this.torneo.modalidad,tipoJugador1:this.tipoJugador,tipoJugador2:this.tipoJugador2,faseActual:this.torneo.fase_actual,estado:this.torneo.estado}}).afterClosed().subscribe(i=>{void 0!==i&&this.actualizarResultado(t.id,i,t.fase)})}actualizarResultado(t,o,i){this._torneoService.actualizarPartido(t,o).pipe((0,n.R)(this._unsubscribeAll)).subscribe(a=>{this.Toast.fire({icon:"success",title:"Partido actualizado con exito"}),this.obtenerPartidosTorneo(this.torneo.id,!0),this.obtenerGruposRefresh(),this._changeDetectorRef.markForCheck()},a=>{this.Toast.fire({icon:"error",title:a.error.mensaje})})}seleccionarGrupoPartidos(t){if("Cruzada"!==this.tipoJornada){if("grupos"===this.etapaControl.value&&""===this.jornadaControl.value&&(this.showTabla=!1,this.tablaJugadoresData=new l.by([]),this.mensajePartidos="Selecciona una jornada."),"grupos"===this.etapaControl.value&&""!==this.jornadaControl.value){this.tablaJugadoresData=new l.by([]),this.grupoSeleccionado=t;let o=this.jornadaControl.value,i=[];this.faseGrupos[this.grupoSeleccionado].forEach(a=>{a.jornada.id===o&&i.push(a)}),i.length?(this.tablaJugadoresData=new l.by(i),this.showTabla=!0):(this.showTabla=!1,this.mensajePartidos="No hay partidos en este grupo para la jornada seleccionada."),this._changeDetectorRef.markForCheck()}this._changeDetectorRef.markForCheck()}}cambiarTorneoAprogramacionDialog(){this.grupos.length?this._matDialog.open(j,{data:{mensaje:"\xbfEst\xe1s seguro que deseas programar la fase de grupos del torneo? Luego de esta accion no puedes volver a editar los grupos."}}).afterClosed().subscribe(o=>{!0===o&&("Programacion"===this.torneo.estado?this.programarPartidos():this.cambiarTorneoAProgramacion())}):this.Toast.fire({icon:"error",title:"No se puede programar partidos de la fase de grupos si no hay grupos."})}cambiarTorneoAProgramacion(){this._torneoService.cambiarTorneoAProgramacion(this.torneo.id).pipe((0,n.R)(this._unsubscribeAll)).subscribe(t=>{this.programarPartidos()},t=>{this.Toast.fire({icon:"error",title:t.error.mensaje})})}programarPartidos(){this._torneoService.programarPartidosFase(this.torneo.id).pipe((0,n.R)(this._unsubscribeAll)).subscribe(t=>{this.Toast.fire({icon:"success",title:"Se ha sorteado con exito la fase de grupos."}),this.actualizarDataTorneo(),this._changeDetectorRef.markForCheck()},t=>{this.Toast.fire({icon:"error",title:t.error.mensaje})})}sortearSiguienteFaseTorneo(){this._torneoService.sortearSiguienteFase(this.torneo.id).pipe((0,n.R)(this._unsubscribeAll)).subscribe(t=>{this.Toast.fire({icon:"success",title:"Siguiente fase sorteada con exito"}),this.actualizarDataTorneo()},t=>{this.Toast.fire({icon:"error",title:t.error.mensaje})})}dialogFinalizarTorneo(t){this._matDialog.open(j,{data:{mensaje:"\xbfEst\xe1s seguro que quieres finalizar este torneo?"}}).afterClosed().subscribe(i=>{void 0!==i&&this.finalizarTorneo()})}finalizarTorneo(){this._torneoService.sortearSiguienteFase(this.torneo.id).pipe((0,n.R)(this._unsubscribeAll)).subscribe(t=>{this.Toast.fire({icon:"success",title:`Torneo Finalizado, Felicitaciones ${t.ganador} `}),this.actualizarDataTorneo()},t=>{this.Toast.fire({icon:"error",title:t.error.mensaje})})}obtenerJornadasPorTorneo(){this._torneoService.obtenerJornadasPorTorneo(this.torneo.id).pipe((0,n.R)(this._unsubscribeAll)).subscribe(t=>{this.jornadas=t.jornadas,this.jornadaControl.enable(),this.obtenerPartidosTorneo(this.torneo.id,!1),this._changeDetectorRef.markForCheck()},t=>{this.Toast.fire({icon:"error",title:t.error.mensaje})})}ordenarJornadas(){let t={};this.jornadas.forEach(o=>{t[o.id]=[],this.partidos.forEach(i=>{i.jornada&&i.jornada.id===o.id&&t[o.id].push(i)})}),this.partidosJornadas=t}ordenarPartidosEscalera(){let t={};this.grupos.forEach(o=>{t[o.nombre_grupo]=[]}),this.partidos.forEach(o=>{var i;"grupos"===o.fase&&(null===(i=null==o?void 0:o.grupo)||void 0===i?void 0:i.id)&&t[o.grupo.nombre_grupo].push(o),"octavos"===o.fase&&this.faseOctavos.push(o),"cuartos"===o.fase&&this.faseCuartos.push(o),"semifinales"===o.fase&&this.faseSemifinal.push(o),"final"===o.fase&&this.faseFinal.push(o)}),this.faseGrupos=t,this.etapaControl.enable(),this.etapaControl.setValue(this.torneo.fase_actual),"grupos"!==this.torneo.fase_actual&&this.etapaChange(this.torneo.fase_actual),this.ordenarJornadas(),"Cruzada"===this.tipoJornada&&(this.showTabla=!0,this.tablaJugadoresData=new l.by(this.partidosJornadas[this.jornadaControl.value]),this._changeDetectorRef.markForCheck()),this._changeDetectorRef.markForCheck()}jornadaChange(t,o){if(this.tipoJornada=o.split(" ")[1],this.showTabla=!1,"Regular"===this.tipoJornada)if(""===this.grupoSeleccionado)this.mensajePartidos="Selecciona un grupo para ver los partidos de la jornada.";else{let i=[];this.faseGrupos[this.grupoSeleccionado].forEach(a=>{a.jornada.id===t&&i.push(a)}),i.length?this.showTabla=!0:(this.showTabla=!1,this.mensajePartidos="No hay partidos en esta jornada."),this.tablaJugadoresData=new l.by(i)}else this.tablaJugadoresData=new l.by(this.partidosJornadas[t]),this.partidosJornadas[t].length?this.showTabla=!0:(this.showTabla=!1,this.mensajePartidos="No hay partidos para esta jornada.");this._changeDetectorRef.markForCheck()}programarPartidosJornada(){""!==this.jornadaControl.value&&this._torneoService.programarPartidosjornada(this.torneo.id,this.jornadaControl.value).pipe((0,n.R)(this._unsubscribeAll)).subscribe(t=>{this.Toast.fire({icon:"success",title:"Jornada programada con exito."}),this.verificarDataPartidos()},t=>{this.Toast.fire({icon:"error",title:t.error.mensaje})})}trackByFn(t,o){return o.id||t}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(e.sBO),e.Y36(g.uw),e.Y36(_))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-torneo-escalera"]],decls:50,vars:23,consts:[[1,"flex","flex-wrap","w-full","max-w-screen-xl","mx-auto","p-6","md:p-8"],[1,"w-full","grid","grid-cols-1","sm:grid-cols-3"],[1,"col-span-2"],[1,"text-3xl","font-semibold","tracking-tight","leading-8"],[1,"text-naranmi",3,"routerLink"],[1,"icon-size-6","text-black",3,"svgIcon"],[1,"text-xl","font-semibold","tracking-tight","leading-8","cursor-pointer",3,"click"],[1,"text-naranmi"],["class","flex justify-start sm:justify-end mt-3 sm:mt-0",4,"ngIf"],["class","flex items-center justify-end w-full",4,"ngIf"],["class","w-full flex justify-end items-center mt-5",4,"ngIf"],[1,"mt-10"],[1,"flex","items-center","justify-between","w-full"],[1,"w-full"],[1,"relative","flex","items-center","justify-center","w-full","dark:text-gray-50"],[1,"flex","items-center","justify-start","w-full","h-full","gap-6","py-4","mx-auto","overflow-auto"],["class","relative flex w-full sm:w-auto h-full",4,"ngFor","ngForOf","ngForTrackBy"],[1,"w-full","mt-4"],["class","w-full flex justify-end items-center",4,"ngIf"],[1,"w-full","mt-4","mb-4"],[1,"grid","grid-cols-1","sm:grid-cols-2","gap-3"],["id","fasetorneo","required","",3,"formControl","placeholder","selectionChange"],["value","grupos"],["value","octavos"],["value","cuartos"],["value","semifinales"],["value","final"],["class","w-full",4,"ngIf"],[4,"ngIf"],["class","w-full",4,"ngIf","ngIfElse"],["elseNoPartidos",""],[1,"flex","justify-start","sm:justify-end","mt-3","sm:mt-0"],[1,"p-2.5","bg-slate-500","rounded-full","text-white","text-2xl","font-bold"],[1,"flex","items-center","justify-end","w-full"],[1,"flex","items-center","ml-6","gap-2"],["mat-flat-button","",1,"hidden","sm:inline-flex","text-white","font-bold","text-lg",3,"disabled","color","click"],[1,"icon-size-5",3,"svgIcon"],[1,"ml-2"],[1,"sm:hidden"],["mat-icon-button","",3,"disabled","matMenuTriggerFor"],[3,"svgIcon"],["actionsMenu","matMenu"],["mat-menu-item","",3,"click"],[1,"w-full","flex","justify-end","items-center","mt-5"],["mat-flat-button","",1,"inline-flex","text-white","font-bold","text-lg","bg-naranmi",3,"click"],[1,"relative","flex","w-full","sm:w-auto","h-full"],[1,"w-56","p-3","rounded-lg","shadow","hover:shadow-xl","transition-shadow","duration-150","ease-in-out","bg-card",3,"click"],[1,"w-full","border-b-2","border-chiliRed","cursor-pointer"],[1,"font-bold","text-lg","text-center"],[1,"w-full","mt-4","cursor-pointer"],["class","flex flex-row justify-between",4,"ngFor","ngForOf"],[1,"flex","justify-end","mt-4","text-md","font-md"],[1,"flex","flex-row","justify-between"],["class","font-semibold text-base",4,"ngIf"],["class","font-semibold text-base mb-2",4,"ngIf"],[1,"mb-7"],[1,"font-semibold","text-base"],["class","text-naranmi",4,"ngIf"],[1,"font-semibold","text-base","mb-2"],[1,"w-full","flex","justify-end","items-center"],["id","jornada","required","",3,"formControl","placeholder","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"grid","grid-cols-1","sm:grid-cols-2"],[1,"font-semibold","text-xl","flex","items-center"],[1,"w-full","form-buscar-jugador"],["matInput","","type","text","placeholder","Buscar jugador",3,"formControl"],[1,"grid","grid-cols-1","xl:grid-cols-1","gap-8","w-full","mt-8"],[1,"xl:col-span-2","flex","flex-col","flex-auto","bg-card","shadow","rounded-xl","overflow-hidden"],[1,"overflow-x-auto","mx-6"],["mat-table","",1,"w-full","bg-transparent",3,"dataSource","trackBy"],["matColumnDef","JugadorU"],["mat-header-cell","","class","text-black text-lg",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","jugadorD"],["matColumnDef","etapa"],["matColumnDef","acciones"],["class","text-center","mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["class","order-row h-16","mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","",1,"text-black","text-lg"],["mat-cell",""],[1,"inline-flex","items-center","font-bold","text-xs","px-2.5","py-0.5","rounded-full","tracking-wide","uppercase",3,"ngClass"],[1,"pr-6","font-semibold","text-base","whitespace-nowrap"],["mat-cell","",1,"text-center"],[1,"icon-size-5","cursor-pointer","text-naranmi","hover:opacity-60",3,"svgIcon","click"],["mat-header-row",""],["mat-row","",1,"order-row","h-16"],[1,"p-8","sm:p-16","border-t","text-4xl","font-semibold","tracking-tight","text-center","w-full"]],template:function(t,o){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"a",4),e._UZ(5,"mat-icon",5),e._uU(6," Torneos"),e.qZA(),e._uU(7),e.qZA(),e.TgZ(8,"div",6),e.NdJ("click",function(){return o.verInscritosModal()}),e._uU(9," Hay "),e.TgZ(10,"span",7),e._uU(11),e.qZA(),e._uU(12),e.ALo(13,"i18nPlural"),e.qZA()(),e.YNc(14,vt,5,3,"div",8),e.qZA(),e.YNc(15,Tt,21,15,"div",9),e.YNc(16,Ct,5,1,"div",10),e.TgZ(17,"div",11)(18,"div",12)(19,"div")(20,"div",3),e._uU(21,"Grupos"),e.qZA()()()(),e._UZ(22,"div",13),e.TgZ(23,"div",14)(24,"div",15),e.YNc(25,kt,9,2,"div",16),e.qZA()(),e._UZ(26,"div",17),e.YNc(27,At,5,1,"div",18),e.TgZ(28,"div",19)(29,"div",20)(30,"mat-form-field",13)(31,"mat-label"),e._uU(32,"Elegir fase torneo "),e.qZA(),e.TgZ(33,"mat-select",21),e.NdJ("selectionChange",function(a){return o.etapaChange(a.value)}),e.TgZ(34,"mat-option",22),e._uU(35,"Fase de grupos"),e.qZA(),e.TgZ(36,"mat-option",23),e._uU(37,"Octavos de final"),e.qZA(),e.TgZ(38,"mat-option",24),e._uU(39,"Cuartos de final"),e.qZA(),e.TgZ(40,"mat-option",25),e._uU(41,"Semifinales"),e.qZA(),e.TgZ(42,"mat-option",26),e._uU(43,"Final"),e.qZA()()(),e.YNc(44,Rt,5,3,"mat-form-field",27),e.YNc(45,yt,1,0,"div",28),e.YNc(46,Ft,5,1,"div",18),e.qZA()(),e.YNc(47,zt,24,6,"div",29),e.YNc(48,Bt,2,1,"ng-template",null,30,e.W1O),e.qZA()),2&t){const i=e.MAs(49);e.xp6(4),e.Q6J("routerLink",e.DdM(21,Lt)),e.xp6(1),e.Q6J("svgIcon","mat_outline:arrow_back_ios"),e.xp6(2),e.hij(" / ",o.torneo.nombre," "),e.xp6(4),e.Oqu(o.inscritos.length),e.xp6(1),e.hij(" ",e.xi3(13,18,o.modalidadTorneo,e.DdM(22,$t))," "),e.xp6(2),e.Q6J("ngIf","En Proceso"===o.torneo.estado),e.xp6(1),e.Q6J("ngIf",o.showInicial),e.xp6(1),e.Q6J("ngIf",o.showEnProceso&&"final"===o.torneo.fase_actual),e.xp6(9),e.Q6J("ngForOf",o.grupos)("ngForTrackBy",o.trackByFn),e.xp6(2),e.Q6J("ngIf",o.showEnProceso&&"final"!==o.torneo.fase_actual),e.xp6(6),e.Q6J("formControl",o.etapaControl)("placeholder","Fase torneo"),e.xp6(11),e.Q6J("ngIf","grupos"===o.etapaControl.value),e.xp6(1),e.Q6J("ngIf","grupos"===o.etapaControl.value&&"grupos"===o.torneo.fase_actual),e.xp6(1),e.Q6J("ngIf","grupos"===o.etapaControl.value&&"grupos"===o.torneo.fase_actual),e.xp6(1),e.Q6J("ngIf",o.showTabla)("ngIfElse",i)}},directives:[k.yS,J.Hw,d.O5,w.lW,Z.p6,Z.VK,Z.OP,d.sg,x.KE,x.hX,N.gD,c.Q7,c.JJ,c.oH,U.ey,A.Nt,c.Fj,l.BZ,l.w1,l.fO,l.ge,l.Dz,l.ev,d.mk,l.as,l.XQ,l.nj,l.Gk],pipes:[d.Gx,d.rS],styles:["::-webkit-scrollbar{height:10px}::-webkit-scrollbar-track{background:#f1f1f1}::-webkit-scrollbar-thumb{background:#888;border-radius:5px}::-webkit-scrollbar-thumb:hover{background:#555}.icon-display{transform:scale(1.4);float:right!important}.icon-display-delete{transform:scale(1)}.form-buscar-jugador{padding:6px;border-radius:5px;background-color:#fff;font-weight:bolder}.form-buscar-jugador:active{border:1px solid #FFD484}table{width:100%}th{border-bottom:2px solid #E33022!important}.mat-form-field.mat-form-field-appearance-fill .mat-form-field-wrapper .mat-form-field-flex,.mat-form-field.mat-form-field-appearance-fill.mat-focused .mat-form-field-wrapper .mat-form-field-flex{border-radius:15px!important;background-color:#bebebe72!important}mat-select{font-size:18px;font-weight:700}\n"],encapsulation:2}),r})();function Vt(r,s){1&r&&(e.ynx(0),e._UZ(1,"app-torneo-regular"),e.BQk())}function Xt(r,s){1&r&&(e.ynx(0),e._UZ(1,"app-torneo-escalera"),e.BQk())}let Wt=(()=>{class r{constructor(t,o,i){this._changeDetectorRef=t,this._matDialog=o,this._torneoService=i,this._unsubscribeAll=new v.x,this.cantGrupos=0,this.torneo={},this.grupos=[],this.grupoSeleccionado="",this.buscarJugador=new c.NI({value:"",disabled:!1}),this.tablaJugadoresData=new l.by([]),this.tablaJugadoresColumns=["JugadorU","jugadorD","etapa","acciones"],this.inscritos=[],this.partidos=[],this.faseGrupos=[],this.faseOctavos=[],this.faseCuartos=[],this.faseSemifinal=[],this.faseFinal=[],this.etapa="grupos",this.etapaControl=new c.NI({value:"",disabled:!1}),this.tipoJugador="",this.tipoJugador2="",this.mensajePartidos="\xa1No hay partidos para mostrar!",this.showTabla=!1,this.tipojuego="",this.showEditar=!1,this.showAcciones=!1,this.disableButtons=!1,this.showPrograma=!1,this.showSiguienteFase=!1,this.showSiguietenJornada=!1,this.jornadas=[],this.jornadaControl=new c.NI({value:"",disabled:!1}),this.jornadasOrden=[],this.Toast=h().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:a=>{a.addEventListener("mouseenter",h().stopTimer),a.addEventListener("mouseleave",h().resumeTimer)}})}ngOnInit(){this._torneoService.torneo$.pipe((0,n.R)(this._unsubscribeAll)).subscribe(t=>{this.torneo=t,this.cantGrupos=t.cantidad_grupos,this._changeDetectorRef.markForCheck()}),this._torneoService.grupos$.pipe((0,n.R)(this._unsubscribeAll)).subscribe(t=>{this.grupos=t,this._changeDetectorRef.markForCheck()}),this._torneoService.inscritosTorneo$.pipe((0,n.R)(this._unsubscribeAll)).subscribe(t=>{this.inscritos=t,this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}editarTorneoDialogo(){this._matDialog.open(y,{data:{accion:"Editar",torneo:this.torneo}}).afterClosed().subscribe(o=>{void 0!==o&&this.editarTorneo(o)})}editarTorneo(t){this._torneoService.editarTorneo(this.torneo.id,t).pipe((0,n.R)(this._unsubscribeAll)).subscribe(o=>{this.Toast.fire({icon:"success",title:"Torneo editado con exito."}),this.actualizarDataTorneo()},o=>{this.Toast.fire({icon:"error",title:o.error.mensaje})})}actualizarDataTorneo(){this._torneoService.obtenerTorneoByIdRefresh(this.torneo.id).pipe((0,n.R)(this._unsubscribeAll)).subscribe(t=>{this._torneoService.torneo=t,"final"===t.fase_actual&&(this.showSiguienteFase=!1,this._changeDetectorRef.markForCheck())},t=>{this.Toast.fire({icon:"error",title:t.error.mensaje})})}crearGrupoDialogo(){this.grupos.length!==this.cantGrupos?this._matDialog.open(F,{data:{accion:"Crear",cantGrupos:this.grupos.length,tipojuego:this.tipojuego}}).afterClosed().subscribe(o=>{void 0!==o&&this.crearGrupo(o)}):this.Toast.fire({icon:"error",title:`La cantidad de grupos en el torneo ya esta en el limite definido: ${this.cantGrupos}`})}crearGrupo(t){this._torneoService.crearGrupo(t,this.torneo.id).pipe((0,n.R)(this._unsubscribeAll)).subscribe(o=>{this.Toast.fire({icon:"success",title:"Grupo creado con exito"}),this.actualizarGrupos()},o=>{this.Toast.fire({icon:"error",title:o.error.mensaje})})}actualizarGrupos(){this._torneoService.obtenerGruposRefresh(this.torneo.id).pipe((0,n.R)(this._unsubscribeAll)).subscribe(t=>{this._torneoService.grupos=t},t=>{this.Toast.fire({icon:"error",title:t.error.mensaje})})}removerJugador(t,o){this._matDialog.open(j,{data:{mensaje:"\xbfEst\xe1s seguro que quieres eliminar este jugador del grupo?"}}).afterClosed().subscribe(a=>{!0===a&&this._torneoService.removerParticipanteGrupo(this.torneo.id,o.id,t.id).pipe((0,n.R)(this._unsubscribeAll)).subscribe(u=>{this.Toast.fire({icon:"success",title:`El jugador ha sido eliminado del Grupo ${o.nombre_grupo}`}),this.actualizarGrupos()},u=>{this.Toast.fire({icon:"error",title:u.error.mensaje})})})}removeGrupo(t){this._matDialog.open(j,{data:{mensaje:"\xbfEst\xe1s seguro que quieres borrar este grupo?"}}).afterClosed().subscribe(i=>{!0===i&&this._torneoService.eliminarGrupo(this.torneo.id,t.id).pipe((0,n.R)(this._unsubscribeAll)).subscribe(a=>{this.Toast.fire({icon:"success",title:"El grupo ha sido eliminado con exito."}),this.actualizarGrupos()},a=>{this.Toast.fire({icon:"error",title:a.error.mensaje})})})}addIntegranteGrupoDialog(t){this._matDialog.open(F,{data:{accion:"Editar",grupo:t,cantGrupos:this.grupos.length,tipojuego:this.tipojuego}}).afterClosed().subscribe(i=>{void 0!==i&&this.anadirIntegranteGrupo(t,i)})}anadirIntegranteGrupo(t,o){this._torneoService.agregarParticipanteGrupo(this.torneo.id,t.id,Object.assign({},o)).pipe((0,n.R)(this._unsubscribeAll)).subscribe(i=>{this.Toast.fire({icon:"success",title:"El jugador ha sido agregado con exito al grupo."}),this.actualizarGrupos()},i=>{this.Toast.fire({icon:"error",title:i.error.mensaje})})}etapaChange(t){if(this.showTabla=!1,"escalera"!==this.torneo.tipo_torneo||"grupos"!==t){switch(t){case"grupos":this.tablaJugadoresData=new l.by([]),this.mensajePartidos="Selecciona un grupo para ver los partidos.";break;case"octavos":0===this.faseOctavos.length?this.mensajePartidos="No hay partidos para esta fase.":(this.tablaJugadoresData=new l.by(this.faseOctavos),this.showTabla=!0);break;case"cuartos":0===this.faseCuartos.length?this.mensajePartidos="No hay partidos para esta fase.":(this.tablaJugadoresData=new l.by(this.faseCuartos),this.showTabla=!0);break;case"semifinales":0===this.faseSemifinal.length?this.mensajePartidos="No hay partidos para esta fase.":(this.tablaJugadoresData=new l.by(this.faseSemifinal),this.showTabla=!0);break;case"final":0===this.faseFinal.length?this.mensajePartidos="No hay partidos para esta fase.":(this.tablaJugadoresData=new l.by(this.faseFinal),this.showTabla=!0)}"grupos"===t&&(this.mensajePartidos="Selecciona un grupo para ver los partidos"),this.etapa=t}}editarPartido(t){this._matDialog.open(P,{data:{sets:this.torneo.configuracion_sets[this.etapa],partido:t,etapa:this.etapa,modalidad:this.torneo.modalidad,tipoJugador1:this.tipoJugador,tipoJugador2:this.tipoJugador2,faseActual:this.torneo.fase_actual}}).afterClosed().subscribe(i=>{void 0!==i&&this.actualizarResultado(t.id,i,t.fase)})}actualizarResultado(t,o,i){this._torneoService.actualizarPartido(t,o).pipe((0,n.R)(this._unsubscribeAll)).subscribe(a=>{this.Toast.fire({icon:"success",title:"Partido actualizado con exito"}),this.tablaJugadoresData=new l.by([]),this.faseOctavos=[],this.faseCuartos=[],this.faseSemifinal=[],this.faseFinal=[],this.obtenerPartidosTorneo(this.torneo.id,!0,i),this._changeDetectorRef.markForCheck()},a=>{this.Toast.fire({icon:"error",title:a.error.mensaje})})}seleccionarGrupoPartidos(t){if("grupos"===this.etapaControl.value&&"regular"===this.torneo.tipo_torneo?(this.grupoSeleccionado=t.nombre_grupo,this.tablaJugadoresData=new l.by(this.faseGrupos[t.nombre_grupo]),this.showTabla=!0):"grupos"!==this.etapaControl.value?(this.etapaControl.setValue("grupos"),this.grupoSeleccionado=t.nombre_grupo,this.tablaJugadoresData=new l.by(this.faseGrupos[t.nombre_grupo]),this.showTabla=!0):(this.showTabla=!1,this.tablaJugadoresData=new l.by([])),"escalera"===this.torneo.tipo_torneo&&("grupos"===this.etapaControl.value&&""===this.jornadaControl.value&&(this.showTabla=!1,this.tablaJugadoresData=new l.by([]),this.mensajePartidos="Selecciona una jornada."),"grupos"===this.etapaControl.value&&""!==this.jornadaControl.value)){this.tablaJugadoresData=new l.by([]),this.grupoSeleccionado=t.nombre_grupo;let o=this.jornadaControl.value,i=[];this.faseGrupos[this.grupoSeleccionado].forEach(a=>{a.jornada.id===o&&i.push(a)}),this.tablaJugadoresData=new l.by(i),this.showTabla=!0,this.mensajePartidos="Selecciona una jornada."}this._changeDetectorRef.markForCheck()}determinarTorneo(){"singles"===this.torneo.modalidad?(this.tipoJugador="jugador1",this.tipoJugador2="jugador2",this.tipojuego="jugador"):(this.tipoJugador="pareja1",this.tipoJugador2="pareja2",this.tipojuego="pareja")}obtenerPartidosTorneo(t,o,i){this._torneoService.obtenerPartidosTorneo(t).pipe((0,n.R)(this._unsubscribeAll)).subscribe(a=>{this.partidos=a,this.ordenarPartidosFaseGrupos(o,i),this._changeDetectorRef.markForCheck()},a=>{this.Toast.fire({icon:"error",title:a.error.mensaje})})}ordenarPartidosFaseGrupos(t,o=""){let i={};this.grupos.forEach(a=>{i[a.nombre_grupo]=[]}),this.partidos.forEach(a=>{"grupos"===a.fase&&i[a.grupo.nombre_grupo].push(a),"octavos"===a.fase&&this.faseOctavos.push(a),"cuartos"===a.fase&&this.faseCuartos.push(a),"semifinales"===a.fase&&this.faseSemifinal.push(a),"final"===a.fase&&this.faseFinal.push(a)}),this.faseGrupos=i,""!==this.grupoSeleccionado&&"grupos"===this.torneo.fase_actual&&(this.tablaJugadoresData=new l.by(this.faseGrupos[this.grupoSeleccionado]),this._changeDetectorRef.markForCheck()),this.etapaControl.enable(),this.etapaControl.setValue(this.torneo.fase_actual),t&&"grupos"!==o&&this.etapaChange(this.torneo.fase_actual),"grupos"===this.torneo.fase_actual&&(this.mensajePartidos="Selecciona un grupo para ver los partidos."),this._changeDetectorRef.markForCheck()}inscribirJugadorModal(){this._matDialog.open(E,{data:{accion:"Crear",tipojuego:this.tipojuego,torneo:this.torneo,inscritos:this.inscritos}}).afterClosed().subscribe(o=>{void 0!==o&&(this.disableButtons=!0,"singles"===this.torneo.modalidad?this.inscribirJugador(o,this.torneo.id):this.inscribirPareja(o,this.torneo.id))})}inscribirJugador(t,o){this._torneoService.inscribirJugador({jugador:t,torneo:o}).pipe((0,n.R)(this._unsubscribeAll)).subscribe(i=>{this.Toast.fire({icon:"success",title:"El jugador ha sido inscrito al torneo con exito."}),this.disableButtons=!1,this.obtenerInscritosTorneo(),this._changeDetectorRef.markForCheck()},i=>{this.disableButtons=!1,this.Toast.fire({icon:"error",title:i.error.mensaje})})}inscribirPareja(t,o){this._torneoService.inscribirPareja({pareja:t,torneo:o}).pipe((0,n.R)(this._unsubscribeAll)).subscribe(i=>{this.Toast.fire({icon:"success",title:"La pareja ha sido inscrita al torneo con exito."}),this.disableButtons=!1,this.obtenerInscritosTorneo(),this._changeDetectorRef.markForCheck()},i=>{this.disableButtons=!1,this.Toast.fire({icon:"error",title:i.error.mensaje})})}obtenerInscritosTorneo(){this._torneoService.obtenerInscritosTorneo(this.torneo.id).pipe((0,n.R)(this._unsubscribeAll)).subscribe(t=>{this._torneoService.inscritos=t},t=>{this.Toast.fire({icon:"error",title:t.error.mensaje})})}verInscritosModal(){this._matDialog.open(S,{data:{accion:"Crear",inscritos:this.inscritos,tipojuego:this.tipojuego,torneo:this.torneo}}).afterClosed().subscribe(o=>{})}cambiarTorneoAprogramacionDialog(){this.grupos.length?this._matDialog.open(j,{data:{mensaje:"\xbfEst\xe1s seguro que deseas programar la fase de grupos del torneo? Luego de esta accion no puedes volver a editar los grupos."}}).afterClosed().subscribe(o=>{!0===o&&this.cambiarTorneoAProgramacion()}):this.Toast.fire({icon:"error",title:"No se puede programar partidos de la fase de grupos si no hay grupos."})}cambiarTorneoAProgramacion(){this._torneoService.cambiarTorneoAProgramacion(this.torneo.id).pipe((0,n.R)(this._unsubscribeAll)).subscribe(t=>{this.programarPartidos()},t=>{this.Toast.fire({icon:"error",title:t.error.mensaje})})}programarPartidos(){this._torneoService.programarPartidosFase(this.torneo.id).pipe((0,n.R)(this._unsubscribeAll)).subscribe(t=>{this.Toast.fire({icon:"success",title:"Se ha sorteado con exito la fase de grupos."}),this.showAcciones=!1,this.showPrograma=!1,this.actualizarDataTorneo()},t=>{this.Toast.fire({icon:"error",title:t.error.mensaje})})}sortearSiguienteFaseTorneo(){this._torneoService.sortearSiguienteFase(this.torneo.id).pipe((0,n.R)(this._unsubscribeAll)).subscribe(t=>{this.Toast.fire({icon:"success",title:"Siguiente fase sorteada con exito"}),this.actualizarDataTorneo()},t=>{this.Toast.fire({icon:"error",title:t.error.mensaje})})}obtenerDataEscalera(){this.obtenerJornadasPorTorneo()}obtenerJornadasPorTorneo(){this._torneoService.obtenerJornadasPorTorneo(this.torneo.id).pipe((0,n.R)(this._unsubscribeAll)).subscribe(t=>{this.jornadas=t.jornadas,this.obtenerPartidosEscalera()},t=>{this.Toast.fire({icon:"error",title:t.error.mensaje})})}obtenerPartidosEscalera(){this._torneoService.obtenerPartidosTorneo(this.torneo.id).pipe((0,n.R)(this._unsubscribeAll)).subscribe(t=>{this.partidos=t,this.ordenarJornadas(),this._changeDetectorRef.markForCheck()},t=>{this.Toast.fire({icon:"error",title:t.error.mensaje})})}ordenarJornadas(){let t={};this.grupos.forEach(o=>{t[o.nombre_grupo]=[]}),this.partidos.forEach(o=>{"grupos"===o.fase&&t[o.grupo.nombre_grupo].push(o),"octavos"===o.fase&&this.faseOctavos.push(o),"cuartos"===o.fase&&this.faseCuartos.push(o),"semifinales"===o.fase&&this.faseSemifinal.push(o),"final"===o.fase&&this.faseFinal.push(o)}),this.faseGrupos=t,this.etapaControl.enable(),this.etapaControl.setValue(this.torneo.fase_actual),"grupos"===this.torneo.fase_actual&&(this.mensajePartidos="Selecciona un grupo y una jornada para ver los partidos.")}programarPartidosJornada(){""!==this.jornadaControl.value&&this._torneoService.programarPartidosjornada(this.torneo.id,this.jornadaControl.value).pipe((0,n.R)(this._unsubscribeAll)).subscribe(t=>{this.Toast.fire({icon:"success",title:"Jornada programada con exito."}),console.log(t)},t=>{this.Toast.fire({icon:"error",title:t.error.mensaje})})}jornadaChange(t){if(this._changeDetectorRef.markForCheck(),""===this.grupoSeleccionado)this.mensajePartidos="Selecciona un grupo para ver los partidos de la jornada.";else{let o=[];this.faseGrupos[this.grupoSeleccionado].forEach(i=>{i.jornada.id===t&&o.push(i)}),console.log(o),this.tablaJugadoresData=new l.by(o)}}trackByFn(t,o){return o.id||t}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(e.sBO),e.Y36(g.uw),e.Y36(_))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-details"]],decls:3,vars:2,consts:[[1,"flex","flex-col","flex-auto","w-full"],[4,"ngIf"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.YNc(1,Vt,2,0,"ng-container",1),e.YNc(2,Xt,2,0,"ng-container",1),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf","regular"===o.torneo.tipo_torneo),e.xp6(1),e.Q6J("ngIf","escalera"===o.torneo.tipo_torneo))},directives:[d.O5,xt,Ht],styles:[""],encapsulation:2}),r})(),Kt=(()=>{class r{constructor(t){this._torneosService=t}resolve(t,o){return this._torneosService.obtenerTorneos()}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(_))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),eo=(()=>{class r{constructor(t){this._torneosService=t}resolve(t,o){return this._torneosService.obtenerTorneoById(t.paramMap.get("id"))}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(_))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),to=(()=>{class r{constructor(t){this._torneosService=t}resolve(t,o){return this._torneosService.obtenerJugadoresInscritosTorneo(t.paramMap.get("id"))}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(_))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const lo=[{path:"",component:M,children:[{path:"",component:Je},{path:":id",component:Wt,resolve:{torneo:eo,grupos:(()=>{class r{constructor(t){this._torneosService=t}resolve(t,o){return this._torneosService.obtenerGruposTorneo(t.paramMap.get("id"))}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(_))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),inscritos:to}}],resolve:{torneos:Kt,ramas:(()=>{class r{constructor(t){this._torneosService=t}resolve(t,o){return this._torneosService.obtenerRamas()}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(_))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),tipos:(()=>{class r{constructor(t){this._torneosService=t}resolve(t,o){return this._torneosService.obtenerTipos()}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(_))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),modalidades:(()=>{class r{constructor(t){this._torneosService=t}resolve(t,o){return this._torneosService.obtenerModalidades()}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(_))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),categorias:(()=>{class r{constructor(t){this._torneosService=t}resolve(t,o){return this._torneosService.obtenerCategorias()}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(_))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),fases:(()=>{class r{constructor(t){this._torneosService=t}resolve(t,o){return this._torneosService.obtenerFases()}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(_))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})()}}];let co=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[k.Bz.forChild(lo)],k.Bz]}),r})();var uo=p(9510);let po=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[co,uo.m]]}),r})()}}]);